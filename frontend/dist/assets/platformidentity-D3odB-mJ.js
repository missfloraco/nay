import{f as M,r as l,j as e,X as B,F as O,h as G,q as $,p as q,S as I,l as K}from"./index-CyxQwsQl.js";import{A as V,P as W}from"./adminlayout-BZTWR09H.js";import{I as F}from"./input-field-Cci2A17T.js";import{U as J,C as P}from"./circularimageupload-C_JywwqS.js";import{I as H}from"./image-CfgfSMTU.js";import{T as X}from"./type-CQQ28Ykv.js";import{L as T}from"./link-DWpt8cXd.js";import{L as Q}from"./sparkles-ClcDe-Ep.js";import{S as Y}from"./save-BnVArzGb.js";import"./adslot-DC0mcUoM.js";import"./drawer-Bj6KWlWm.js";import"./helpers-CPSgdYRA.js";import"./log-out-DA5HdhrL.js";import"./user-CAZ9w-Ov.js";import"./theme-toggle-DmE4dG8g.js";import"./users-BsWlUMcl.js";import"./shield-B62tIG1s.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],ee=M("file-type",Z),z=({label:r,accept:U="image/*",onChange:b,error:p,hint:y,initialPreview:C,className:L=""})=>{const[_,v]=l.useState(C||null),[k,t]=l.useState(null),[i,s]=l.useState(!1),m=l.useRef(null),j=o=>{var c;const d=((c=o.target.files)==null?void 0:c[0])||null;g(d)},g=o=>{if(o){if(t(o.name),o.type.startsWith("image/")){const d=new FileReader;d.onloadend=()=>{v(d.result)},d.readAsDataURL(o)}else v(null);b(o)}else t(null),v(null),b(null)},f=o=>{o.stopPropagation(),t(null),v(null),m.current&&(m.current.value=""),b(null)},N=o=>{o.preventDefault(),s(!0)},u=()=>{s(!1)},w=o=>{var c;o.preventDefault(),s(!1);const d=((c=o.dataTransfer.files)==null?void 0:c[0])||null;g(d)};return e.jsxs("div",{className:`space-y-2.5 group w-full ${L}`,children:[e.jsx("label",{className:"form-label group-focus-within:text-primary",children:r}),e.jsxs("div",{onClick:()=>{var o;return(o=m.current)==null?void 0:o.click()},onDragOver:N,onDragLeave:u,onDrop:w,className:`
                    relative cursor-pointer min-h-[140px] rounded-2xl border-2 border-dashed transition-all duration-500 flex flex-col items-center justify-center p-6
                    ${i?"border-primary bg-primary/5 scale-[1.02] shadow-xl":"border-slate-200 dark:border-white/10 bg-slate-50/50 dark:bg-dark-900/40 hover:bg-white dark:hover:bg-dark-800/60 hover:border-slate-300 dark:hover:border-white/20"}
                    ${p?"border-red-500 bg-red-50/10":""}
                `,children:[e.jsx("input",{type:"file",ref:m,onChange:j,accept:U,className:"hidden"}),_?e.jsxs("div",{className:"relative w-full h-full flex flex-col items-center gap-4 animate-in zoom-in-95 duration-500",children:[e.jsx("img",{src:_,alt:"Preview",className:"max-h-[120px] rounded-xl shadow-lg border-4 border-white dark:border-dark-800 ring-1 ring-gray-100 dark:ring-white/5 object-contain"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/90 dark:bg-dark-900/90 backdrop-blur px-3 py-1.5 rounded-full border border-gray-100 dark:border-white/10 shadow-sm",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 dark:text-gray-400 truncate max-w-[150px]",children:k||"تم رفع الصورة"}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-red-50 text-gray-400 hover:text-red-500 rounded-full transition-colors",children:e.jsx(B,{size:14})})]})]}):k?e.jsxs("div",{className:"flex flex-col items-center gap-3 animate-in fade-in",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center text-primary",children:e.jsx(O,{size:24})}),e.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-300",children:k}),e.jsx("button",{onClick:f,className:"text-[10px] font-black text-red-500 uppercase tracking-widest hover:underline",children:"مسح الملف"})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center transition-all duration-500 group-hover:scale-105",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-dark-800 rounded-2xl flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/10 transition-all duration-500",children:e.jsx(J,{size:28})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-black text-gray-700 dark:text-gray-200",children:"اضغط للرفع أو اسحب الملف هنا"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:U.includes("image")?"PNG, JPG, SVG بمساحة قصوى 2MB":"جميع صيغ الملفات مدعومة"})]})]})]}),p?e.jsx("p",{className:"text-[10px] text-red-500 font-black px-2 animate-in fade-in slide-in-from-top-1",children:p}):y?e.jsx("p",{className:"text-[10px] text-gray-400 font-bold px-2",children:y}):null]})};function be(){const{settings:r,updateSettings:U,refreshSettings:b,loading:p}=G(),{showToast:y}=$(),{setPrimaryAction:C}=q(),[L,_]=l.useState(!1),[v,k]=l.useState(0),[t,i]=l.useState({app_name:r.appName||"",primary_color:r.primaryColor||"#2a8cff",secondary_color:r.secondaryColor||"#ffc108",font_family:r.fontFamily||"Default",company_name:r.companyName||"",company_link:r.companyLink||"",custom_font_url:r.customFontUrl||"",custom_heading_font_url:r.customHeadingFontUrl||""}),[s,m]=l.useState({system_logo:null,favicon:null,custom_font:null,custom_heading_font:null});l.useEffect(()=>{(s.custom_font||s.custom_heading_font||t.custom_font_url||t.custom_heading_font_url)&&i(a=>({...a,font_family:"Custom"}))},[s.custom_font,s.custom_heading_font,t.custom_font_url,t.custom_heading_font_url]);const[j,g]=l.useState(!1),[f,N]=l.useState(!1),[u,w]=l.useState(!1),[o,d]=l.useState(!1);l.useEffect(()=>{!p&&r&&i({app_name:r.appName||"",primary_color:r.primaryColor||"#2a8cff",secondary_color:r.secondaryColor||"#ffc108",font_family:r.fontFamily||"Default",company_name:r.companyName||"",company_link:r.companyLink||"",custom_font_url:r.customFontUrl||"",custom_heading_font_url:r.customHeadingFontUrl||""})},[r,p]),l.useEffect(()=>{C(null)},[C]);const c=(a,x)=>{m(h=>({...h,[a]:x})),a==="system_logo"&&g(!1),a==="favicon"&&N(!1),a==="custom_font"&&w(!1),a==="custom_heading_font"&&d(!1)},S=a=>{m(x=>({...x,[a]:null})),a==="system_logo"&&g(!0),a==="favicon"&&N(!0),a==="custom_font"&&w(!0),a==="custom_heading_font"&&d(!0)},A=async()=>{var a,x;_(!0);try{const h=s.system_logo||s.favicon||s.custom_font||s.custom_heading_font||j||f||u||o,R=s.custom_font||s.custom_heading_font||!u&&r.customFontFile||!o&&r.customHeadingFontFile||t.custom_font_url||t.custom_heading_font_url?"Custom":"Default";if(h){const n=new FormData;s.system_logo?n.append("logo_url",s.system_logo):j&&n.append("remove_logo_url","1"),s.favicon?n.append("favicon_url",s.favicon):f&&n.append("remove_favicon_url","1"),s.custom_font?n.append("custom_font_file",s.custom_font):u&&n.append("remove_custom_font_file","1"),s.custom_heading_font?n.append("custom_heading_font_file",s.custom_heading_font):o&&n.append("remove_custom_heading_font_file","1"),Object.entries(t).forEach(([D,E])=>{D==="font_family"?n.append(D,R):n.append(D,E)}),await I.updateSettings("admin",n)}else await I.updateSettings("admin",{...t,font_family:R});await b(),k(n=>n+1),m({system_logo:null,favicon:null,custom_font:null,custom_heading_font:null}),g(!1),N(!1),w(!1),d(!1),y("تم تحديث هوية المنصة بنجاح","success")}catch(h){K.error(h);const R=((x=(a=h.response)==null?void 0:a.data)==null?void 0:x.message)||"حدث خطأ أثناء الحفظ";y(R,"error")}finally{_(!1)}};return e.jsx(V,{title:"هوية المنصة",noPadding:!0,hideLeftSidebar:!0,children:e.jsx("div",{className:"h-full w-full bg-white dark:bg-dark-950 p-6 animate-in fade-in duration-500 overflow-y-auto no-scrollbar pb-44",children:e.jsxs("div",{className:"mx-auto space-y-12 w-full",children:[e.jsxs("div",{className:"flex items-center gap-6 border-b border-gray-100 dark:border-dark-800 pb-8 group",children:[e.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-[2rem] text-indigo-600 shadow-inner group-hover:scale-110 transition-transform",children:e.jsx(W,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-3xl text-gray-900 dark:text-white tracking-tight",children:"هوية المنصة"}),e.jsx("p",{className:"text-base font-bold text-gray-400 dark:text-gray-500",children:"تخصيص الاسم والشعار والخطوط العامة للمنصة"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-12 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 rounded-[2.5rem] bg-gray-50/50 dark:bg-dark-900/40 border border-gray-100 dark:border-dark-800 backdrop-blur-sm",children:[e.jsx(P,{image:j?null:s.system_logo?URL.createObjectURL(s.system_logo):r.systemLogoUrl||r.logoUrl,onImageChange:a=>c("system_logo",a),onRemove:()=>S("system_logo"),uploadId:"system-logo-upload",label:"شعار النظام",size:"xl",variant:"circle",accept:".svg,.png,.jpg,.jpeg,.gif,.webp",fallbackIcon:e.jsx(H,{className:"w-12 h-12"})}),e.jsx("span",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"شعار النظام"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 rounded-[2.5rem] bg-gray-50/50 dark:bg-dark-900/40 border border-gray-100 dark:border-dark-800 backdrop-blur-sm",children:[e.jsx(P,{image:f?null:s.favicon?URL.createObjectURL(s.favicon):r.faviconUrl||null,onImageChange:a=>c("favicon",a),onRemove:()=>S("favicon"),uploadId:"favicon-upload",label:"Favicon",size:"md",variant:"square",accept:".svg,.png,.jpg,.jpeg,.ico",fallbackIcon:e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsx("span",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"أيقونة المتصفح"})]})]}),e.jsxs("div",{className:"space-y-8 w-full py-2",children:[e.jsx(F,{label:"اسم المنصة",value:t.app_name,onChange:a=>i({...t,app_name:a.target.value}),placeholder:"أدخل اسم المنصة",hint:"يظهر هذا الاسم في شريط العنوان ورسائل البريد الإلكتروني"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"form-label mr-1",children:"اللون الأساسي"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-50/50 dark:bg-dark-900/40 border border-slate-200 dark:border-white/5 transition-all hover:bg-white dark:hover:bg-dark-800/60 focus-within:border-primary/50",children:[e.jsx("input",{type:"color",value:t.primary_color,onChange:a=>i({...t,primary_color:a.target.value}),className:"w-12 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0 overflow-hidden"}),e.jsx("span",{className:"text-sm font-black dir-ltr text-gray-600 dark:text-gray-300 uppercase",children:t.primary_color})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"form-label mr-1",children:"اللون الثانوي"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-50/50 dark:bg-dark-900/40 border border-slate-200 dark:border-white/5 transition-all hover:bg-white dark:hover:bg-dark-800/60 focus-within:border-secondary/50",children:[e.jsx("input",{type:"color",value:t.secondary_color,onChange:a=>i({...t,secondary_color:a.target.value}),className:"w-12 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0 overflow-hidden"}),e.jsx("span",{className:"text-sm font-black dir-ltr text-gray-600 dark:text-gray-300 uppercase",children:t.secondary_color})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-50 dark:border-dark-800 space-y-10",children:[e.jsxs("div",{className:"grid lg:grid-cols-[300px_1fr] gap-x-12 gap-y-8 p-8 rounded-[2.5rem] bg-indigo-50/20 dark:bg-indigo-950/20 border border-indigo-100/50 dark:border-indigo-900/30",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-black text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(X,{className:"w-5 h-5 text-indigo-500"}),"خط النصوص والفقرات"]}),e.jsx("p",{className:"text-xs font-bold text-gray-500 leading-relaxed",children:"يتحكم هذا الخيار بالخط الرئيسي المستخدم في المنصة لجميع النصوص والفقرات والقوائم."}),!u&&(r.customFontFile||s.custom_font||t.custom_font_url)?e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-900/40 text-emerald-600 dark:text-emerald-400 text-[10px] font-black uppercase tracking-wider",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"مفعل حالياً"]}):e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-[10px] font-black uppercase tracking-wider",children:"الخط الافتراضي (Cairo)"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{label:"رفع ملف الخط (Body)",accept:".ttf,.woff,.woff2,.otf",initialPreview:r.customFontFile?"font-exists":void 0,onChange:a=>{a?c("custom_font",a):S("custom_font")},hint:"ارفع ملف الخط بتنسيق TTF أو WOFF للهواتف والمتصفحات"}),e.jsx(F,{label:"أو رابط خارجي للهاتف (Body URL)",value:t.custom_font_url,onChange:a=>i({...t,custom_font_url:a.target.value}),placeholder:"https://example.com/font.ttf",icon:T,className:"ltr",hint:"في حال استخدام روابط Google Fonts المباشرة للملفات"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[300px_1fr] gap-x-12 gap-y-8 p-8 rounded-[2.5rem] bg-pink-50/20 dark:bg-pink-950/20 border border-pink-100/50 dark:border-pink-900/30",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-black text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-pink-500"}),"خط العناوين (Headings)"]}),e.jsx("p",{className:"text-xs font-bold text-gray-500 leading-relaxed",children:"يمكنك تخصيص خط منفصل للعناوين الكبيرة والمتوسطة لإعطاء المنصة طابعاً بصرياً مميزاً."}),!o&&(r.customHeadingFontFile||s.custom_heading_font||t.custom_heading_font_url)?e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-900/40 text-emerald-600 dark:text-emerald-400 text-[10px] font-black uppercase tracking-wider",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"مفعل حالياً"]}):e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-[10px] font-black uppercase tracking-wider",children:"يتبع خط النصوص"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{label:"رفع ملف الخط (Heading)",accept:".ttf,.woff,.woff2,.otf",initialPreview:r.customHeadingFontFile?"font-exists":void 0,onChange:a=>{a?c("custom_heading_font",a):S("custom_heading_font")},hint:"يفضل استخدام النسخة العريضة (Bold) من الخط للعناوين"}),e.jsx(F,{label:"أو رابط خارجي للعناوين (Heading URL)",value:t.custom_heading_font_url,onChange:a=>i({...t,custom_heading_font_url:a.target.value}),placeholder:"https://example.com/heading.ttf",icon:T,className:"ltr",hint:"سيتم تطبيق هذا الخط على جميع العناوين في المنصة"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-50 dark:border-dark-800 space-y-8",children:[e.jsxs("h3",{className:"text-lg font-black text-gray-900 dark:text-white flex items-center gap-2 px-1",children:[e.jsx("span",{className:"w-1.5 h-6 bg-purple-500 rounded-full"}),"حقوق النشر والملكية"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(F,{label:"اسم الشركة المالكة",value:t.company_name,onChange:a=>i({...t,company_name:a.target.value}),placeholder:"مثال: ناي للحلول التقنية",hint:"سيظهر في ذيل الصفحة: أحد مشاريع شركة [الاسم]"}),e.jsx(F,{label:"رابط الشركة (URL)",value:t.company_link,onChange:a=>i({...t,company_link:a.target.value}),onBlur:()=>{t.company_link&&!/^https?:\/\//i.test(t.company_link)&&i(a=>({...a,company_link:`https://${t.company_link}`}))},placeholder:"https://example.com",className:"ltr",hint:"سيتم توجيه المستخدم لهذا الرابط عند الضغط على اسم الشركة"})]})]}),e.jsx("div",{className:"pt-12 border-t border-gray-100 dark:border-dark-800 flex justify-end",children:e.jsxs("button",{onClick:A,disabled:L,className:"w-full md:w-auto px-12 h-16 flex items-center justify-center gap-4 bg-primary hover:bg-primary/90 text-white rounded-3xl font-black shadow-2xl shadow-primary/20 transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-50 min-w-[280px] text-lg",children:[L?e.jsx(Q,{className:"w-6 h-6 animate-spin"}):e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{children:"تحديث بيانات المنصة"})]})})]})]})]})})})}export{be as default};
