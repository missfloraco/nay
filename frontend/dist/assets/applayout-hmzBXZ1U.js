import{a as g,j as e,T as S,u as I,h as T,d as B,p as E,c as q,w as P,L as $,l as M,f}from"./index-CytmB-Er.js";import{u,A as R}from"./adslot-1WJBBd70.js";import{M as z,H as F,P as O,L as _,C as H,b as K,B as U}from"./sidebar-left-s-soE1BO.js";import{S as V}from"./shield-alert-D3dSgJZt.js";import{L as W}from"./log-out-DPAkzXIl.js";import{S as Q}from"./shield-overlay-jKLJv9mZ.js";import{L as Y}from"./loader-circle-Bj7yhw_M.js";const G=({tenantName:r,onExit:l})=>{const{isImpersonating:n}=g();return n?e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[10000] animate-in slide-in-from-top duration-500",children:[e.jsxs("div",{className:"bg-gradient-to-r from-accent2 to-red-600 text-white px-4 py-2.5 shadow-2xl flex items-center justify-between backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:e.jsx(V,{className:"w-5 h-5 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-black tracking-tight flex items-center gap-2",children:["وضع محاكاة النظام (Impersonation Mode)",e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase",children:"للعرض فقط"})]}),e.jsxs("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest",children:["أنت تشاهد الآن متجر: ",e.jsx("span",{className:"underline",children:r})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-end mr-4",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter opacity-60",children:"الأمان"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold leading-none text-white/90",children:[e.jsx(S,{className:"w-3 h-3 text-white animate-pulse"}),"وصول محدود للمشرف (للعرض فقط)"]})]}),e.jsxs("button",{onClick:l,className:"bg-white text-accent2 px-5 py-2 rounded-xl font-black text-xs hover:bg-gray-100 transition-all flex items-center gap-2 shadow-lg hover:scale-105 active:scale-95",children:[e.jsx(W,{className:"w-4 h-4"}),"إنهاء المحاكاة"]})]})]}),e.jsx("div",{className:"h-[2px] w-full bg-white/20 blur-[1px]"})]}):null},re=({children:r,title:l="",noPadding:n=!1,leftSidebarContent:b})=>{var h;const{user:d,tenant:t,isImpersonating:c,logout:j}=g(),{user:w}=I(),{settings:J,isAdBlockActive:v,isCheckingAdBlock:y}=T(),{t:x}=B(),{primaryAction:a}=E(),N=c||!!w,k=q(),A=async()=>{try{await j(!1),window.location.href="/admin/tenants"}catch(s){M.error("Exit impersonation failed",s),window.location.href="/admin/tenants"}},{data:i}=u({queryKey:["support-notifications-count"],queryFn:()=>f.get("/app/support/notifications/support"),refetchInterval:5e3,enabled:!!d}),C=(i==null?void 0:i.count)||0,{data:o}=u({queryKey:["trash-count"],queryFn:()=>f.get("/app/trash"),refetchInterval:1e4,enabled:!!d}),L=((h=o==null?void 0:o.stats)==null?void 0:h.total)||0,p=[{icon:z,label:x("tenant.NAV.SUPPORT","رسائل الدعم"),path:"/app/support/messages",color:"text-[#fb005e]",badge:C},{icon:P,label:x("tenant.NAV.RECYCLE_BIN","سلة المحذوفات"),path:"/app/trash",color:"text-red-600 font-black",badge:L}];return e.jsxs("div",{className:`h-screen bg-gray-50/50 dark:bg-dark-950 transition-colors duration-500 overflow-hidden flex flex-col ${c?"pt-[64px]":""}`,dir:"rtl",children:[!y&&v&&e.jsx(Q,{}),e.jsx(G,{tenantName:(t==null?void 0:t.name)||"...",onExit:A}),e.jsx(F,{onMenuClick:()=>{},title:l||""}),e.jsxs("div",{className:"flex h-[calc(100vh-180px)] overflow-hidden relative",children:[e.jsxs("aside",{className:"hidden lg:flex lg:sticky top-0 bottom-0 w-[250px] shrink-0 h-full bg-white dark:bg-dark-900 border-l border-gray-300 dark:border-dark-600 z-40 transition-all duration-500 ease-in-out flex-col shadow-2xl lg:shadow-none",children:[e.jsx("nav",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-1.5",children:p.map(s=>{const m=k.pathname.startsWith(s.path);return e.jsx("div",{className:"relative group/item",children:e.jsxs($,{to:s.path,className:`flex items-center gap-4 px-4 py-3.5 rounded-2xl transition-all duration-300 font-bold group relative overflow-hidden
                                        ${m?"bg-primary text-white shadow-lg shadow-primary/30 active-nav-item":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-dark-800/50 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(s.icon,{className:`w-5 h-5 transition-all duration-500 ${m?"scale-110":"group-hover:scale-110"}`}),e.jsx("span",{className:"text-sm flex-1",children:s.label}),s.badge>0&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1 animate-pulse",children:s.badge>9?"9+":s.badge})]})},s.path)})}),e.jsx("div",{className:"flex flex-col border-t border-gray-100 dark:border-dark-700 bg-gray-50/30 dark:bg-dark-800/20",children:e.jsx("div",{className:"h-[90px] px-6 flex items-center justify-center",children:a?e.jsxs("button",{type:a.type||"button",form:a.form,onClick:a.onClick,disabled:a.disabled||a.loading,className:`flex items-center justify-center gap-3 w-full py-3.5 px-6 ${a.variant==="danger"?"bg-red-600 shadow-red-500/20":"bg-primary shadow-primary/30"} text-white rounded-2xl shadow-lg transition-all font-black hover:scale-[1.02] active:scale-95 disabled:opacity-50`,children:[a.loading?e.jsx(Y,{className:"w-5 h-5 animate-spin"}):a.icon?e.jsx(a.icon,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:a.label})]}):null})})]}),e.jsx("div",{className:"flex-1 flex flex-col relative overflow-hidden bg-gray-50 dark:bg-dark-950",children:e.jsx("main",{className:"flex-1 overflow-hidden relative p-4",children:e.jsx("div",{className:`w-full h-full bg-white dark:bg-dark-900 flex flex-col overflow-y-auto no-scrollbar ${n?"p-0":"p-6 md:p-8 lg:p-12 pb-32 md:pb-40 lg:pb-48"}`,children:r})})}),e.jsx(_,{children:b})]}),e.jsx("footer",{className:"flex h-[90px] border-t border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-900 items-center justify-between transition-all z-50",children:e.jsxs("div",{className:"flex h-full items-center w-full",children:[e.jsx(H,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden h-full",children:e.jsx(R,{placement:"ad_footer_leaderboard",className:"w-full h-full",showPlaceholder:!1})}),!N&&e.jsx(K,{type:"tenant",tenant:t})]})}),e.jsx(U,{items:p})]})};export{re as A};
