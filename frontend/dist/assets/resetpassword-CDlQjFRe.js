import{f as A,g as I,b as D,r as a,j as e,C as g,i as F,e as R}from"./index-3tzHmsOf.js";import{A as j,E as y,P as _}from"./passwordstrengthindicator-Byg1ZWFO.js";import{I as b}from"./input-field-CqDw_XU4.js";import{C as N}from"./circle-check-Dc0cBGBt.js";import{E as v}from"./eye-KtuTuuxE.js";import{L as q}from"./sparkles-BZvr4uos.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],M=A("key-round",K);function J(){const[c]=I(),m=D(),[x,p]=a.useState(!1),[h,o]=a.useState(""),[k,C]=a.useState(!1),[l,P]=a.useState(!1),[d,S]=a.useState(!1),[s,u]=a.useState({password:"",confirmPassword:""}),[E,n]=a.useState("weak"),i=c.get("token"),r=c.get("email");a.useEffect(()=>{(!i||!r)&&o("رابط إعادة تعيين كلمة المرور غير صالح")},[i,r]),a.useEffect(()=>{const t=s.password;t.length===0||t.length<6?n("weak"):t.length<10?n("medium"):n("strong")},[s.password]);const z=async t=>{var f,w;if(t.preventDefault(),o(""),s.password.length<8){o("كلمة المرور يجب أن تكون 8 أحرف على الأقل");return}if(s.password!==s.confirmPassword){o("كلمات المرور غير متطابقة");return}p(!0);try{await F(),await R.post("/app/reset-password",{token:i,email:r,password:s.password,password_confirmation:s.confirmPassword}),C(!0),setTimeout(()=>{m("/login")},2e3)}catch(L){o(((w=(f=L.response)==null?void 0:f.data)==null?void 0:w.message)||"حدث خطأ ما. يرجى المحاولة لاحقاً.")}finally{p(!1)}};return k?e.jsx(j,{title:"تم بنجاح!",subtitle:"تم إعادة تعيين كلمة المرور بنجاح",children:e.jsxs("div",{className:"text-center py-8 animate-in zoom-in-95 duration-700",children:[e.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 shadow-xl shadow-emerald-100/50",children:e.jsx(N,{className:"w-12 h-12 text-emerald-500 animate-pulse"})}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-lg leading-relaxed mb-6 font-bold",children:["تم تغيير كلمة المرور بأمان.",e.jsx("br",{}),"سيتم تحويلك إلى صفحة تسجيل الدخول..."]})]})}):e.jsx(j,{title:"إعادة تعيين كلمة المرور",subtitle:"أدخل كلمة المرور الجديدة لحسابك",children:e.jsxs("form",{onSubmit:z,className:"space-y-6 animate-in fade-in slide-in-from-bottom-5 duration-500",children:[h&&e.jsxs("div",{role:"alert",className:"p-5 bg-red-50/50 border-2 border-red-500/20 text-red-600 text-sm font-bold rounded-2xl flex items-center gap-3 animate-in slide-in-from-top-2 duration-300",children:[e.jsx(g,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{children:h})]}),r&&e.jsxs("div",{className:"p-5 bg-primary/5 border border-primary/20 rounded-[2rem] flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest leading-none mb-1",children:"الحساب المستهدف"}),e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white",children:r})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative group",children:e.jsx(b,{label:"كلمة المرور الجديدة",id:"password",type:l?"text":"password",required:!0,value:s.password,onChange:t=>u({...s,password:t.target.value}),placeholder:"••••••••",autoComplete:"new-password",className:"!pe-16",endContent:e.jsx("button",{type:"button",onClick:()=>P(!l),className:"text-gray-400 hover:text-primary transition-colors h-5 w-5 flex items-center justify-center p-0",children:l?e.jsx(y,{size:18}):e.jsx(v,{size:18})})})}),e.jsx(_,{strength:E,passwordLength:s.password.length})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative group",children:e.jsx(b,{label:"تأكيد كلمة المرور",id:"confirmPassword",type:d?"text":"password",required:!0,value:s.confirmPassword,onChange:t=>u({...s,confirmPassword:t.target.value}),placeholder:"••••••••",autoComplete:"new-password",className:"!pe-16",endContent:e.jsx("button",{type:"button",onClick:()=>S(!d),className:"text-gray-400 hover:text-primary transition-colors h-5 w-5 flex items-center justify-center p-0",children:d?e.jsx(y,{size:18}):e.jsx(v,{size:18})})})}),s.confirmPassword.length>0&&e.jsx("div",{className:"pt-1 px-1 animate-in fade-in duration-300",children:s.password===s.confirmPassword?e.jsxs("p",{className:"text-xs font-bold text-emerald-600 flex items-center gap-1.5",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),"كلمات المرور متطابقة"]}):e.jsxs("p",{className:"text-xs font-bold text-red-600 flex items-center gap-1.5",children:[e.jsx(g,{className:"w-3.5 h-3.5"}),"كلمات المرور غير متطابقة"]})})]}),e.jsx("button",{type:"submit",disabled:x||!i||!r,className:"w-full h-16 bg-primary text-white rounded-2xl font-black text-lg shadow-2xl shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 flex items-center justify-center gap-3",children:x?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"جاري المعالجة..."})]}):"تحديث كلمة المرور"}),e.jsx("div",{className:"pt-8 text-center border-t border-gray-100 dark:border-dark-800",children:e.jsx("button",{type:"button",onClick:()=>m("/login"),className:"text-sm text-gray-500 dark:text-gray-400 font-bold hover:text-primary transition-colors",children:"العودة لتسجيل الدخول"})})]})})}export{J as default};
