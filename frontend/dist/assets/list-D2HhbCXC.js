import{f as I,T as B,s as A,j as e,t as Y,r as n,v as oe,e as v,p as ne,l as de,C as ce,M as me}from"./index-CyxQwsQl.js";import{r as pe,a as X}from"./helpers-CPSgdYRA.js";import{A as xe}from"./adminlayout-BZTWR09H.js";import{T as d}from"./textsadminpanel-DB4O06i_.js";import{V as ue}from"./btn-crud-CQptlRXm.js";import{T as ge}from"./table-Bgq6U4EG.js";import{C as H}from"./clock-D6x6jZr7.js";import{C as be}from"./circularimageupload-C_JywwqS.js";import{C as he}from"./constants-DPRNOWFl.js";import{I as h}from"./input-field-Cci2A17T.js";import{S as fe}from"./select-field-D4KX5DsD.js";import{M as z}from"./mail-BuZJhIit.js";import{S as K}from"./shield-B62tIG1s.js";import{C as Q,D as ye}from"./dollar-sign-BTGpOarP.js";import{P as Ne,L as we}from"./phone-CgOYFpDT.js";import{G as _e}from"./globe-koAPSkYK.js";import{I as je}from"./image-CfgfSMTU.js";import{L as ke,S as ve}from"./sparkles-ClcDe-Ep.js";import{S as Se}from"./save-BnVArzGb.js";import{U as Ce}from"./users-BsWlUMcl.js";import{I as Te,D as J,A as Ee}from"./table-cells-BSPpJxzy.js";import{D as Ae}from"./drawer-Bj6KWlWm.js";import{P as De}from"./adslot-DC0mcUoM.js";import{E as $e}from"./eye-COkmuOv-.js";import{U as Me}from"./user-CAZ9w-Ov.js";import"./square-pen-C7dXzopo.js";import"./database-Bma1fOMh.js";import"./chevron-right-Wgfm7FsJ.js";import"./log-out-DA5HdhrL.js";import"./theme-toggle-DmE4dG8g.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z=I("ban",Re);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Le=I("key",Ie);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ue=I("layout-grid",Oe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Ge=I("log-in",Pe),ee={pending:{icon:B,label:"قيد الانتظار",className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700"},trial:{icon:H,label:"تجربة",className:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800"},active:{icon:A,label:"مفعّل",className:"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800"},expired:{icon:B,label:"منتهية",className:"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800"},disabled:{icon:Z,label:"معطّل",className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700"}};function qe({status:r,trialExpiresAt:D}){const f=ee[r],u=f.icon;return e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-bold ${f.className}`,children:[e.jsx(u,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:f.label})]})}function Fe({tenant:r,tenants:D,onSelect:f,onUpdate:u,onNavigateToPayments:$}){const{showSuccess:S,showError:y,showConfirm:w}=Y(),[t,x]=n.useState({name:"",email:"",whatsapp:"",country_code:"",status:"",trial_expires_at:"",subscription_ends_at:"",password:"",ads_enabled:!0}),[C,_]=n.useState(null),[j,L]=n.useState(!1),[k,T]=n.useState(null),[O,g]=n.useState(!1);n.useEffect(()=>{r&&(x({name:r.name,email:r.email||"",whatsapp:r.whatsapp||"",country_code:r.country_code||"",status:r.status,trial_expires_at:r.trial_expires_at?r.trial_expires_at.split("T")[0]:"",subscription_ends_at:r.subscription_ends_at?r.subscription_ends_at.split("T")[0]:"",password:"",ads_enabled:r.ads_enabled??!0}),T(pe(r.avatar_url)),_(null),g(!1))},[r]);const E=async s=>{var m,c;if(s.preventDefault(),!!r)try{L(!0);const l=new FormData;l.append("_method","PUT"),l.append("name",t.name),l.append("email",t.email),l.append("whatsapp",t.whatsapp),l.append("country_code",t.country_code),t.trial_expires_at&&l.append("trial_expires_at",t.trial_expires_at),t.subscription_ends_at&&l.append("subscription_ends_at",t.subscription_ends_at),t.status&&l.append("status",t.status),t.password&&l.append("admin_password",t.password),l.append("ads_enabled",t.ads_enabled?"1":"0"),O?l.append("remove_avatar","1"):C&&l.append("avatar",C),await v.post(`/admin/tenants/${r.id}`,l,{headers:{"Content-Type":"multipart/form-data"}}),S(d.MESSAGES.SUCCESS),u()}catch(l){y(((c=(m=l.response)==null?void 0:m.data)==null?void 0:c.message)||d.MESSAGES.ERROR)}finally{L(!1)}},M=async()=>{var m,c;if(!(!r||!await w({title:"الدخول كمسؤول للنظام (محاكاة)",message:`هل أنت متأكد من رغبتك في الدخول إلى نظام المستأجر "${r.name}" كمسؤول؟ ستتمكن من عرض لوحة التحكم والبيانات الخاصة به.`,confirmLabel:"دخول ومحاكاة",cancelLabel:"إلغاء"})))try{const l=await v.post(`/admin/tenants/${r.id}/impersonate`);l.token?window.location.href=`/login?impersonate_token=${l.token}`:y("لم يتم الحصول على رمز الدخول")}catch(l){y(((c=(m=l.response)==null?void 0:m.data)==null?void 0:c.message)||"فشل عملية المحاكاة")}},R=async s=>{var c,l;if(!(!r||!await w({title:s==="enable"?"تفعيل المشترك؟":"تعطيل المشترك؟",message:s==="enable"?"سيتمكن المشترك من الدخول للنظام":"سيتم منع المشترك من الدخول للنظام"})))try{await v.post(`/admin/tenants/${r.id}/${s}`),S(d.MESSAGES.SUCCESS),u()}catch(G){y(((l=(c=G.response)==null?void 0:c.data)==null?void 0:l.message)||d.MESSAGES.ERROR)}},U=async()=>{var m,c;if(!(!r||!await w({title:"حذف المشترك؟",message:"سيتم نقل المشترك إلى سلة المحذوفات",isDestructive:!0})))try{await v.delete(`/admin/tenants/${r.id}`),S(d.MESSAGES.SUCCESS),u()}catch(l){y(((c=(m=l.response)==null?void 0:m.data)==null?void 0:c.message)||d.MESSAGES.ERROR)}},i=s=>{_(s),T(URL.createObjectURL(s)),g(!1)},p=()=>{_(null),T(null),g(!0)},P=[...he.map(s=>({value:s.code,label:s.name})),{value:"other",label:"أخرى"}];return e.jsx("div",{className:"h-full relative",children:r?e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden animate-in slide-in-from-right duration-300",children:[e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:e.jsxs("form",{id:"tenant-details-form",onSubmit:E,className:"pb-32",children:[e.jsxs("div",{className:"py-6 px-8 flex items-center gap-4 bg-gray-50/30 dark:bg-gray-900/10 border-b border-gray-100 dark:border-white/5",children:[e.jsx(be,{image:k,onImageChange:i,onRemove:p,uploadId:"tenant-avatar-upload",size:"xs",variant:"square",className:"!gap-0"}),e.jsxs("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[e.jsx("h2",{className:"font-black text-gray-900 dark:text-white text-base truncate",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-400 font-bold uppercase tracking-wider truncate",children:[e.jsx(z,{className:"w-3 h-3 opacity-50"}),r.email]}),r.email_verified_at?e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10 px-1.5 py-0.5 rounded-full border border-emerald-100 dark:border-emerald-500/20",children:[e.jsx(A,{className:"w-2 h-2"}),e.jsx("span",{children:"مؤكد"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-amber-500 bg-amber-50 dark:bg-amber-500/10 px-1.5 py-0.5 rounded-full border border-amber-100 dark:border-amber-500/20",children:[e.jsx(B,{className:"w-2 h-2"}),e.jsx("span",{children:"غير مؤكد"})]})]})]})]}),e.jsxs("div",{className:"space-y-0.5 mt-4",children:[e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-black text-xs uppercase tracking-widest",children:[e.jsx(K,{className:"w-4 h-4"}),"حالة الحساب والاشتراك"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>x({...t,status:"trial"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-xs flex items-center justify-center gap-2 ${t.status==="trial"?"border-primary bg-primary/5 text-primary shadow-sm shadow-primary/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(H,{className:"w-4 h-4"}),"فترة تجريبية"]}),e.jsxs("button",{type:"button",onClick:()=>x({...t,status:"active"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-xs flex items-center justify-center gap-2 ${t.status==="active"?"border-emerald-600 bg-emerald-50 text-emerald-600 shadow-sm shadow-emerald-500/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(A,{className:"w-4 h-4"}),"اشتراك مفعّل"]})]})]}),e.jsxs("div",{className:"p-8 pt-0 grid grid-cols-1 gap-6",children:[e.jsx(h,{label:"تاريخ نهاية التجربة",type:"date",value:t.trial_expires_at,onChange:s=>x({...t,trial_expires_at:s.target.value}),icon:Q}),e.jsx(h,{label:"تاريخ نهاية الاشتراك",type:"date",value:t.subscription_ends_at,onChange:s=>x({...t,subscription_ends_at:s.target.value}),icon:Q})]}),e.jsxs("div",{className:"p-8 pt-0 flex flex-col gap-6",children:[e.jsx(h,{label:"واتساب التواصل",type:"tel",value:t.whatsapp,onChange:s=>x({...t,whatsapp:s.target.value}),icon:Ne,className:"ltr"}),e.jsx(fe,{label:"الدولة والمنطقة",value:t.country_code,onChange:s=>x({...t,country_code:s.target.value}),options:P,icon:_e})]}),e.jsxs("div",{className:"mx-8 p-6 rounded-3xl bg-blue-50/30 dark:bg-blue-900/10 flex items-center justify-between border border-blue-100/50 dark:border-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${t.ads_enabled?"bg-blue-100 text-blue-600":"bg-gray-100 dark:bg-dark-700 text-gray-400 opacity-50"}`,children:e.jsx(je,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[13px] font-bold text-gray-900 dark:text-gray-100",children:"الإعلانات الممولة"}),e.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:t.ads_enabled?"مفعلة للمشترك":"معطلة للمشترك"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.ads_enabled,onChange:s=>x({...t,ads_enabled:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 shadow-inner transition-all"})]})]}),e.jsx("div",{className:"p-8",children:e.jsx(h,{label:"تغيير كلمة المرور",type:"password",placeholder:"اتركه فارغاً للتجاهل",value:t.password,onChange:s=>x({...t,password:s.target.value}),icon:Le})})]})]})}),e.jsx("div",{className:"p-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-100 dark:border-gray-700/50 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] shrink-0 z-30",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{type:"submit",form:"tenant-details-form",disabled:j,className:"w-full py-4.5 bg-gray-900 text-white dark:bg-white dark:text-gray-900 rounded-[2rem] font-black hover:opacity-90 disabled:opacity-50 text-sm flex items-center justify-center gap-3 shadow-2xl transition-all active:scale-95 group",children:[j?e.jsx(ke,{className:"w-5 h-5 animate-spin"}):e.jsx(Se,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),e.jsx("span",{className:"tracking-wide",children:"حفظ كل التعديلات"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>r&&$(r),title:"سجل الدفعات",className:"aspect-square flex flex-col items-center justify-center bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-2xl hover:bg-emerald-100 transition-all group",children:e.jsx(ye,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:M,title:"دخول كمسؤول (محاكاة)",className:"aspect-square flex flex-col items-center justify-center bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 rounded-2xl hover:bg-blue-100 transition-all group",children:e.jsx(Ge,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),r.status!=="disabled"?e.jsx("button",{onClick:()=>R("disable"),title:"تعطيل المشترك",className:"aspect-square flex flex-col items-center justify-center bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400 rounded-2xl hover:bg-gray-200 transition-all group",children:e.jsx(Z,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}):e.jsx("button",{onClick:()=>R("enable"),title:"تفعيل المشترك",className:"aspect-square flex flex-col items-center justify-center bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-2xl hover:bg-emerald-100 transition-all group",children:e.jsx(A,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:U,title:"حذف المشترك",className:"aspect-square flex flex-col items-center justify-center bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-2xl hover:bg-red-100 transition-all group",children:e.jsx(oe,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-300 text-center p-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-50 dark:bg-gray-900/50 mb-8 flex items-center justify-center border-4 border-white dark:border-gray-800 shadow-xl",children:e.jsx(Ce,{className:"w-10 h-10 opacity-20"})}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-gray-100 mb-2",children:"إدارة المشتركين"}),e.jsx("p",{className:"text-sm text-gray-400 max-w-[240px] leading-relaxed font-bold",children:"اختر أحد المشتركين من القائمة لعرض تفاصيل حسابه وإدارة اشتراكاته."})]})})}function ya(){const{showSuccess:r,showError:D}=Y(),{registerAddAction:f,unregisterAddAction:u}=ne(),[$,S]=n.useState([]),[y,w]=n.useState(!0),[t,x]=n.useState(null),[C,_]=n.useState(1),[j,L]=n.useState(""),[k,T]=n.useState({column:"created_at",order:"desc"}),[O,g]=n.useState(!1),[E,M]=n.useState(!1),[R,U]=n.useState(null),[i,p]=n.useState({name:"",admin_email:"",admin_password:"",status:"trial",trial_expires_at:"",subscription_ends_at:"",ads_enabled:!0}),[P,s]=n.useState(!1),m=a=>{U(a),s(!!a)};n.useEffect(()=>(f(()=>{p({name:"",admin_email:"",admin_password:"",status:"trial",trial_expires_at:"",subscription_ends_at:"",ads_enabled:!0}),g(!0)},d.TENANTS.ADD_TENANT,De),()=>u()),[f,u]),n.useEffect(()=>{c()},[C,j,k]);const c=async()=>{try{w(!0);const a=new URLSearchParams({page:String(C),per_page:"15",...j&&{search:j},sort_by:k.column,sort_order:k.order}),o=await v.get(`/admin/tenants?${a.toString()}`);S(o.data||[]),x(o.meta||null)}catch(a){de.error("Error loading tenants:",a),D(d.MESSAGES.ERROR)}finally{w(!1)}},l=async a=>{var o,b;a.preventDefault(),M(!0);try{await v.post("/admin/tenants",i),r(d.MESSAGES.SUCCESS),g(!1),c()}catch(F){D(((b=(o=F.response)==null?void 0:o.data)==null?void 0:b.message)||d.MESSAGES.ERROR)}finally{M(!1)}},G=a=>{_(a)},ae=(a,o)=>{T({column:a,order:o}),_(1)},q=a=>{if(!a)return"-";try{const o=new Intl.DisplayNames(["ar"],{type:"region"}).of(a);return o?o.split(" ")[0]:a}catch{return a}},re=a=>{const o=!a.subscription_ends_at&&a.trial_expires_at,b=a.subscription_ends_at||a.trial_expires_at;if(!b)return;const F=new Date(b),le=new Date,ie=F.getTime()-le.getTime(),V=Math.ceil(ie/(1e3*60*60*24));if(V<0)return o?"تجربة منتهية":"اشتراك منتهٍ";const W=N=>N===0?"اليوم":N===1?"ينتهي غداً":N===2?"بقي يومان":N>=3&&N<=10?`بقي ${N} أيام`:`بقي ${N} يوماً`;return o?`تجربة (${W(V)})`:`نشط (${W(V)})`},te=a=>{window.location.href=`/admin/payments?tenant=${a.id}&highlight=true`},se=n.useMemo(()=>[{header:"المستأجر",accessor:a=>e.jsx(Te,{name:a.name,avatar:a.avatar_url,uid:a.uid}),exportValue:a=>a.name,className:"min-w-[200px]",sortable:!0,sortKey:"name"},{header:"البريد الإلكتروني",accessor:a=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-sm",children:[e.jsx(z,{className:"w-3 h-3 text-gray-400"}),a.email]}),a.email_verified_at?e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-emerald-600 dark:text-emerald-400",children:[e.jsx(A,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"مؤكد"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-amber-500",children:[e.jsx(ce,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"غير مؤكد"})]})]}),exportValue:a=>a.email,width:"15%",sortable:!0,sortKey:"email"},{header:"البلد",accessor:a=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:q(a.country_code)}),exportValue:a=>q(a.country_code)||"",className:"min-w-[100px]"},{header:"رقم الهاتف / واتساب",accessor:a=>e.jsx("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-sm",dir:"ltr",children:a.whatsapp||"-"}),exportValue:a=>a.whatsapp||"-",width:"15%"},{header:"الحالة",accessor:a=>e.jsx(qe,{status:a.status,trialExpiresAt:a.trial_expires_at}),exportValue:a=>{var o;return((o=ee[a.status])==null?void 0:o.label)||a.status},className:"min-w-[100px]"},{header:"تاريخ الانضمام",accessor:a=>e.jsx(J,{date:a.created_at}),exportValue:a=>X(a.created_at),width:"15%",sortable:!0,sortKey:"created_at"},{header:"تاريخ انتهاء الاشتراك",accessor:a=>e.jsx(J,{date:a.subscription_ends_at||a.trial_expires_at||"",label:re(a),isUrgent:!a.subscription_ends_at||a.subscription_ends_at&&new Date(a.subscription_ends_at).getTime()<new Date().getTime()+10080*60*1e3}),exportValue:a=>X(a.subscription_ends_at||a.trial_expires_at||""),width:"15%"},{header:d.TENANTS.ACTIONS,accessor:a=>e.jsx(Ee,{children:e.jsx(ue,{type:"icon",onClick:()=>m(a),icon:$e,label:"إدارة",variant:"primary",className:"bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/40"})}),width:"10%",hideInExport:!0}],[q,m]);return e.jsxs(xe,{title:d.TITLES.TENANTS,hideLeftSidebar:!0,children:[e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(ge,{columns:se,data:$,isLoading:y,exportFileName:"قائمة_المشتركين",paginationMeta:t,onPageChange:G,currentSort:k,onSortChange:ae})})}),e.jsx(me,{isOpen:O,onClose:()=>g(!1),title:d.TENANTS.ADD_TENANT,size:"xl",children:e.jsxs("form",{onSubmit:l,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-8 overflow-y-auto custom-scrollbar p-1",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-gray-900 dark:text-white border-b border-gray-100 dark:border-white/5 pb-2",children:[e.jsx(Me,{className:"w-5 h-5 text-primary"}),"بيانات الحساب"]}),e.jsx(h,{label:d.TENANTS.TENANT_NAME,value:i.name,onChange:a=>p({...i,name:a.target.value}),icon:Ue,required:!0,placeholder:"اسم المتجر أو المؤسسة"}),e.jsx(h,{label:d.TENANTS.ADMIN_EMAIL,type:"email",value:i.admin_email,onChange:a=>p({...i,admin_email:a.target.value}),icon:z,required:!0,placeholder:"email@example.com"}),e.jsx(h,{label:d.TENANTS.ADMIN_PASSWORD,type:"password",value:i.admin_password,onChange:a=>p({...i,admin_password:a.target.value}),icon:we,required:!0,placeholder:"••••••••"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-gray-900 dark:text-white border-b border-gray-100 dark:border-white/5 pb-2",children:[e.jsx(K,{className:"w-5 h-5 text-emerald-600"}),"الاشتراك والصلاحية"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest px-1",children:"نوع الحساب"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>p({...i,status:"trial"}),className:`py-3 rounded-xl border-2 transition-all font-bold text-sm flex items-center justify-center gap-2 ${i.status==="trial"?"border-primary bg-primary/5 text-primary shadow-sm shadow-primary/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(H,{className:"w-4 h-4"}),"فترة تجريبية"]}),e.jsxs("button",{type:"button",onClick:()=>p({...i,status:"active"}),className:`py-3 rounded-xl border-2 transition-all font-bold text-sm flex items-center justify-center gap-2 ${i.status==="active"?"border-emerald-600 bg-emerald-50 text-emerald-600 shadow-sm shadow-emerald-500/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"اشتراك نشط"]})]})]}),e.jsxs("div",{className:"space-y-4 pt-1",children:[e.jsx(h,{type:"date",label:`تاريخ ${i.status==="trial"?"انتهاء التجربة":"انتهاء الاشتراك"}`,value:i.status==="trial"?i.trial_expires_at:i.subscription_ends_at,onChange:a=>{i.status==="trial"?p({...i,trial_expires_at:a.target.value}):p({...i,subscription_ends_at:a.target.value})},icon:Q,required:!0}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"شهر",months:1,color:"blue"},{label:"سنة",months:12,color:"purple"},{label:"مدى الحياة",months:1200,color:"green",special:!0}].map(a=>e.jsx("button",{type:"button",onClick:()=>{const o=new Date;o.setMonth(o.getMonth()+a.months);const b=o.toISOString().split("T")[0];i.status==="trial"?p({...i,trial_expires_at:b}):p({...i,subscription_ends_at:b})},className:`flex-1 px-3 py-2 text-[10px] font-black uppercase tracking-tighter rounded-lg bg-${a.color}-50 text-${a.color}-600 dark:bg-${a.color}-900/20 dark:text-${a.color}-400 hover:opacity-80 transition-all border border-${a.color}-100 dark:border-${a.color}-900/30`,children:a.special?a.label:`+ ${a.label}`},a.label))})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsxs("button",{type:"submit",disabled:E,className:"flex-1 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-xl py-4 font-black hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg active:scale-95 group",children:[E?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(ve,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),E?d.BUTTONS.SAVING:d.TENANTS.CREATE_TENANT]}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-8 bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 rounded-xl py-4 font-bold hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:d.BUTTONS.CANCEL})]})]})}),e.jsx(Ae,{isOpen:P,onClose:()=>s(!1),title:"تفاصيل المشترك",width:"400px",children:e.jsx(Fe,{tenant:R,tenants:$,onSelect:m,onUpdate:c,onNavigateToPayments:te})})]})}export{ya as default};
