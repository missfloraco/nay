import{f as b,w as D,t as T,r as g,e as h,j as e,s as v,C as N,X as ee}from"./index-3tzHmsOf.js";import{u as w,P as re}from"./adslot-DgJhm0dE.js";import{u as z}from"./useMutation-DMUqtB5a.js";import{A as ae}from"./applayout-CRBDHBrP.js";import{I as B}from"./input-field-CqDw_XU4.js";import{T as se}from"./textarea-field-CSHCTiZm.js";import{a as H}from"./helpers-CPSgdYRA.js";import{S as U}from"./shield-check-B-GJQelk.js";import{A as R}from"./archive-BlnL-MMZ.js";import{M as X}from"./sidebar-left-SDr9qEmE.js";import{C as G}from"./clock-DKj3O3SJ.js";import"./sun-BINGn8lG.js";import"./shield-alert-BcYJ9kI8.js";import"./log-out-DEKz7YE3.js";import"./shield-overlay-BPPeF0yr.js";import"./sparkles-BZvr4uos.js";import"./user-BF6dZPLy.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],de=b("circle-question-mark",te);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],J=b("history",le);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],_=b("life-buoy",ie);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],O=b("send",ne);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],oe=b("tag",ce),Se=()=>{var I,A,P,K;const y=D(),{showSuccess:C,showError:$}=T(),[d,p]=g.useState(null),[u,S]=g.useState(""),[n,i]=g.useState(!1),[c,q]=g.useState("all"),{data:o,isLoading:V}=w({queryKey:["tenant-tickets",c],queryFn:()=>h.get(`/app/support/tickets?status=${c}`),refetchInterval:1e4}),{data:x,isLoading:F}=w({queryKey:["active-ticket"],queryFn:()=>h.get("/app/support/active-ticket"),refetchInterval:5e3}),t=(x==null?void 0:x.active_ticket)||((I=x==null?void 0:x.data)==null?void 0:I.active_ticket);g.useEffect(()=>{F||(t?d||(p(t.id),i(!1)):!d&&!n&&c==="active"&&i(!0))},[t,F,d,c]);const{data:f,isLoading:W}=w({queryKey:["tenant-ticket",d],queryFn:()=>h.get(`/app/support/tickets/${d}`),enabled:!!d&&!n,refetchInterval:5e3}),a=n?null:(f==null?void 0:f.data)||f,k=z({mutationFn:r=>h.post(`/app/support/tickets/${d}/reply`,r),onSuccess:()=>{y.invalidateQueries({queryKey:["tenant-ticket",d]}),y.invalidateQueries({queryKey:["active-ticket"]}),S(""),C("تم إرسال الرسالة بنجاح")},onError:()=>$("فشل إرسال الرسالة")}),j=z({mutationFn:r=>h.post("/app/support/tickets",r),onSuccess:r=>{y.invalidateQueries({queryKey:["active-ticket"]}),y.invalidateQueries({queryKey:["tenant-tickets"]}),C("تم إنشاء التذكرة بنجاح"),i(!1),p(r.id)},onError:r=>{var l,m;const s=((m=(l=r.response)==null?void 0:l.data)==null?void 0:m.error)||"فشل إنشاء التذكرة";$(s)}}),Y=r=>{r.preventDefault(),!(!u.trim()||!d)&&k.mutate({message:u})},M=(r,s)=>{if(s)return"bg-red-100/50 text-red-700 border-red-200";switch(r){case"open":return"bg-blue-100/50 text-blue-700 border-blue-200";case"in_progress":return"bg-yellow-100/50 text-yellow-700 border-yellow-200";case"resolved":return"bg-green-100/50 text-green-700 border-green-200";case"closed":return"bg-gray-100/50 text-gray-700 border-gray-200";default:return"bg-gray-100/50 text-gray-700 border-gray-200"}},L=(r,s)=>s?"مؤرشفة":{open:"مفتوحة",in_progress:"قيد المعالجة",resolved:"محلولة",closed:"مغلقة"}[r]||r,Z=r=>{const s=H(r,!0),l=s.split("|");return l.length<3?e.jsx("span",{children:s}):e.jsxs("div",{className:"flex flex-col items-end gap-0",children:[e.jsxs("span",{className:"leading-tight",children:[l[0].trim()," | ",l[1].trim()]}),e.jsx("span",{className:"font-black text-[10px] opacity-60 leading-tight",children:l[2].trim()})]})};return e.jsx(ae,{title:"مركز الدعم الفني",noPadding:!0,leftSidebarContent:e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-dark-900 overflow-hidden -m-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-dark-800 bg-gray-50/10 dark:bg-dark-800/20",children:[e.jsx("nav",{className:"grid grid-cols-2 gap-2",children:[{id:"all",label:"الكل",icon:X,color:"text-gray-400"},{id:"open",label:"مفتوحة",icon:N,color:"text-blue-500"},{id:"in_progress",label:"قيد المعالجة",icon:G,color:"text-yellow-500"},{id:"resolved",label:"محلولة",icon:v,color:"text-green-500"},{id:"closed",label:"مغلقة",icon:ee,color:"text-gray-500"},{id:"archived",label:"الأرشيف",icon:R,color:"text-red-400"}].map(r=>{const s=c===r.id;return e.jsxs("button",{onClick:()=>{q(r.id),p(null),i(!1)},className:`flex items-center gap-2 px-3 py-2.5 rounded-xl transition-all font-bold text-[10px] relative group
                                        ${s?"bg-primary/10 dark:bg-primary/20 text-primary ring-1 ring-primary/20 dark:ring-primary/40 shadow-sm":"bg-gray-50/50 dark:bg-dark-800/30 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-800 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(r.icon,{className:`w-3.5 h-3.5 shrink-0 ${s?"text-primary":r.color}`}),e.jsx("span",{className:`flex-1 text-right truncate ${s?"text-primary":""}`,children:r.label})]},r.id)})}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:()=>{i(!0),p(null),q("all")},className:`w-full py-3.5 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all shadow-md flex items-center justify-center gap-2 ${n||t?"bg-gray-100 dark:bg-dark-800 text-gray-400 dark:text-gray-600 cursor-not-allowed shadow-none":"bg-primary text-white hover:bg-primary/90 shadow-primary/10 active:scale-95"}`,disabled:n||!!t,title:t?"لا يمكن فتح تذكرة جديدة أثناء وجود تذكرة مفتوحة":"",children:[e.jsx(re,{className:"w-4 h-4"}),t?"لديك تذكرة مفتوحة":"تذكرة جديدة"]})})]}),e.jsx("div",{className:"px-6 py-3 border-b border-gray-50 dark:border-dark-800 bg-gray-50/5 dark:bg-dark-900/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-600",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"تذاكرك الحالية"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4 bg-gray-50/5",children:V?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400 font-bold space-y-3",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-gray-200 border-t-gray-400 rounded-full"}),e.jsx("span",{className:"text-[8px] uppercase tracking-widest font-black",children:"جاري التحميل..."})]}):((A=o==null?void 0:o.data)==null?void 0:A.length)===0?e.jsxs("div",{className:"text-center py-16 text-gray-300",children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-4 opacity-10"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-60",children:"لا توجد تذاكر حالية"})]}):e.jsx("div",{className:"space-y-4",children:(P=o==null?void 0:o.data)==null?void 0:P.map(r=>{var s;return e.jsxs("div",{onClick:()=>{p(r.id),i(!1)},className:`p-5 rounded-[28px] cursor-pointer transition-all border-2 group relative overflow-hidden ${d===r.id?"bg-white dark:bg-dark-800 border-primary shadow-2xl shadow-primary/5 scale-[1.02]":"bg-white dark:bg-dark-900 border-transparent hover:border-gray-100 dark:hover:border-dark-800 shadow-sm"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxs("span",{className:`text-[9px] font-black uppercase tracking-widest mb-1 transition-colors ${d===r.id?"text-primary":"text-gray-300"}`,children:["#",r.id]}),e.jsx("h4",{className:`font-black text-[13px] line-clamp-1 transition-colors ${d===r.id?"text-primary":"text-gray-900 group-hover:text-primary"}`,children:r.subject})]})}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50/50 p-2.5 rounded-2xl border border-gray-100/50",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"}),e.jsx("span",{className:"text-[10px] font-bold text-gray-500 truncate",children:(s=H(r.created_at).split("|")[1])==null?void 0:s.trim()})]}),e.jsx("div",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase border shrink-0 ${M(r.status,!!r.deleted_at)}`,children:L(r.status,!!r.deleted_at)})]})]},r.id)})})})]}),children:e.jsx("div",{className:"flex flex-col h-full bg-gray-50/20 overflow-hidden relative",children:n?e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 lg:p-12 text-right",children:e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8 px-2",children:[e.jsx("div",{className:"p-4 bg-white dark:bg-dark-900 rounded-[24px] shadow-lg shadow-primary/5 text-primary border border-gray-100 dark:border-800",children:e.jsx(_,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"فتح تذكرة دعم جديدة"}),e.jsx("p",{className:"text-gray-500 font-bold text-sm",children:"قم بملء النموذج أدناه لبدء محادثة فورية مع فريق الدعم المتخصص"})]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault();const s=new FormData(r.currentTarget);j.mutate({subject:s.get("subject"),message:s.get("message"),priority:s.get("priority")})},className:"flex-1 flex flex-col bg-white dark:bg-dark-900 rounded-[40px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-800 overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-8 lg:p-12 space-y-8 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsx(B,{label:"موضوع التذكرة",name:"subject",required:!0,placeholder:"لدي مشكلة في...",icon:oe}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest px-2 group-focus-within:text-primary transition-colors",children:"مستوى الأهمية"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"low",label:"عادية",color:"bg-blue-50 text-blue-600 border-blue-100",hover:"hover:bg-blue-100"},{id:"medium",label:"متوسطة",color:"bg-gray-50 text-gray-600 border-gray-100",hover:"hover:bg-gray-100"},{id:"high",label:"عالية",color:"bg-orange-50 text-orange-600 border-orange-100",hover:"hover:bg-orange-100"},{id:"urgent",label:"حرجة",color:"bg-red-50 text-red-600 border-red-100",hover:"hover:bg-red-100"}].map(r=>e.jsxs("label",{className:"cursor-pointer relative group",children:[e.jsx("input",{type:"radio",name:"priority",value:r.id,defaultChecked:r.id==="medium",className:"peer sr-only"}),e.jsx("div",{className:`
                                                                flex flex-col items-center justify-center p-4 rounded-3xl border-2 transition-all duration-300
                                                                bg-white border-gray-100 text-gray-400 hover:border-gray-200
                                                                peer-checked:border-current peer-checked:shadow-lg peer-checked:scale-[1.02]
                                                                ${r.id==="low"?"peer-checked:text-blue-600 peer-checked:bg-blue-50/30 peer-checked:border-blue-200":""}
                                                                ${r.id==="medium"?"peer-checked:text-gray-700 peer-checked:bg-gray-50 peer-checked:border-gray-300":""}
                                                                ${r.id==="high"?"peer-checked:text-orange-500 peer-checked:bg-orange-50/30 peer-checked:border-orange-200":""}
                                                                ${r.id==="urgent"?"peer-checked:text-red-500 peer-checked:bg-red-50/30 peer-checked:border-red-200":""}
                                                            `,children:e.jsx("span",{className:"text-sm font-black uppercase tracking-tight",children:r.label})})]},r.id))})]}),e.jsx(se,{label:"تفاصيل المشكلة",name:"message",required:!0,placeholder:"يرجى وصف المشكلة بالتفصيل...",icon:de,className:"min-h-[200px]"})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-3xl bg-primary/5 dark:bg-primary/10 border border-primary/10 dark:border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-primary",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-sm",children:"ضمان الجودة"})]}),e.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 leading-relaxed mb-4",children:"فريق الدعم لدينا يعمل على مدار الساعة لضمان حل المشاكل التقنية في أسرع وقت ممكن. متوسط وقت الرد هو 15 دقيقة."}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-wider text-primary/60 dark:text-primary/40",children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:"دعم فني متخصص"})]})]}),e.jsxs("div",{className:"p-6 rounded-3xl bg-gray-50 dark:bg-dark-800/50 border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-gray-400 dark:text-gray-500",children:[e.jsx(_,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-sm",children:"مركز المساعدة"})]}),e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 leading-relaxed",children:"يمكنك أيضاً مراجعة قسم الأسئلة الشائعة، قد تجد حلاً فورياً لمشكلتك هناك قبل فتح تذكرة."})]})]})]})}),e.jsxs("div",{className:"p-8 bg-gray-50/50 dark:bg-dark-900 border-t border-gray-100 dark:border-dark-800 flex items-center justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-8 py-4 rounded-3xl font-black text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-800 transition-all text-sm",children:"إلغاء الأمر"}),e.jsx("button",{type:"submit",disabled:j.isPending,className:"px-10 py-4 bg-primary text-white rounded-3xl font-black text-sm shadow-xl shadow-primary/20 hover:bg-primary/90 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-3 disabled:opacity-70 disabled:grayscale",children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"جاري الإنشاء..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"إرسال التذكرة"}),e.jsx(O,{className:"w-4 h-4 -rotate-90"})]})})]})]})]})}):d?e.jsx("div",{className:"flex flex-col h-full overflow-hidden animate-in fade-in duration-500",children:W&&!a?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full mb-4"}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 dark:text-gray-600 uppercase tracking-widest",children:"جاري تحميل البيانات..."})]}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-dark-900 border-b border-gray-100 dark:border-dark-800 p-4 flex justify-between items-center shrink-0",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center border-2 border-primary/20 shadow-inner",children:e.jsx(_,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-black text-[15px] text-gray-900 dark:text-white line-clamp-1 max-w-[200px] md:max-w-md",children:a.subject}),e.jsx("div",{className:`w-2 h-2 rounded-full ${M(a.status,!!a.deleted_at).split(" ")[0].replace("/50","")} animate-pulse`})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 dark:text-gray-500 font-bold uppercase tracking-widest leading-none",children:[e.jsxs("span",{children:["#",a.id]}),e.jsx("span",{className:"opacity-30",children:"•"}),e.jsx("span",{className:"text-primary/70",children:L(a.status,!!a.deleted_at)})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 bg-gray-50/30 no-scrollbar",children:e.jsx("div",{className:"space-y-10",children:(K=a==null?void 0:a.messages)==null?void 0:K.map(r=>{var s,l,m,Q,E;return e.jsx("div",{className:`flex animate-in fade-in slide-in-from-bottom-2 duration-500 ${r.is_admin_reply?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:"flex flex-col max-w-[85%] lg:max-w-[80%] group",children:[!r.is_admin_reply&&e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 px-1 animate-in slide-in-from-right-2 duration-300",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-900 dark:text-white uppercase tracking-tighter bg-gray-100 dark:bg-dark-700 px-2 py-0.5 rounded-md shadow-sm",children:(s=t==null?void 0:t.tenant)==null?void 0:s.name}),e.jsx("span",{className:"text-[9px] font-black text-primary/60 dark:text-primary/40 tracking-widest",children:(l=t==null?void 0:t.tenant)==null?void 0:l.uid})]}),e.jsxs("div",{className:"flex items-end gap-3 mb-1",children:[r.is_admin_reply&&e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20 shrink-0 group-hover:scale-110 transition-transform border-4 border-white dark:border-dark-900",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`relative rounded-[24px] px-6 py-4 shadow-md transition-all hover:shadow-xl ring-1 ${r.is_admin_reply?"bg-white dark:bg-dark-800 text-gray-900 dark:text-gray-100 border-2 border-gray-200 dark:border-dark-700 rounded-bl-none ring-gray-100 dark:ring-dark-700":"bg-primary text-white rounded-br-none shadow-primary/20 ring-primary/10"}`,children:[r.is_admin_reply&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest bg-primary/5 px-2 py-0.5 rounded-md",children:"فريق الدعم"})}),e.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap font-bold antialiased",children:r.message})]}),!r.is_admin_reply&&e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white dark:bg-dark-800 border-2 border-gray-100 dark:border-dark-700 flex items-center justify-center shadow-lg shrink-0 overflow-hidden group-hover:scale-110 transition-transform",children:(m=t==null?void 0:t.tenant)!=null&&m.avatar_url?e.jsx("img",{src:t.tenant.avatar_url,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xs font-black text-primary",children:((E=(Q=t==null?void 0:t.tenant)==null?void 0:Q.name)==null?void 0:E.substring(0,2).toUpperCase())||"U"})})]}),e.jsxs("div",{className:`mt-1.5 flex items-center gap-3 font-black uppercase tracking-widest ${r.is_admin_reply?"justify-start text-gray-400 dark:text-gray-600":"justify-end text-primary/70"}`,children:[e.jsx("div",{className:"flex items-center gap-2 order-2",children:r.is_admin_reply?e.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 dark:bg-dark-800 px-2 py-0.5 rounded-full border border-gray-200 dark:border-dark-700",children:[e.jsx(v,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-[8px] opacity-80",children:"تم الاستلام"})]}):e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/5 px-2 py-0.5 rounded-full border border-primary/10",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),e.jsx("span",{className:"text-[8px]",children:"تم الإرسال"})]})}),e.jsx("div",{className:"order-1 text-[9px] bg-white/50 dark:bg-dark-950/20 px-2 py-0.5 rounded-full border border-gray-100 dark:border-dark-800",children:Z(r.created_at)})]})]})},r.id)})})}),(a==null?void 0:a.status)==="closed"&&!(a!=null&&a.deleted_at)&&e.jsx("div",{className:"px-8 py-4 bg-yellow-50 dark:bg-yellow-900/20 border-y border-yellow-100 dark:border-yellow-800/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-yellow-800 dark:text-yellow-300",children:[e.jsx(N,{className:"w-5 h-5 shrink-0"}),e.jsx("p",{className:"text-sm font-bold",children:"هذه التذكرة مغلقة، لا يمكنك إرسال رسائل جديدة. إذا كنت بحاجة إلى مساعدة إضافية، يرجى فتح تذكرة جديدة."})]})}),a!=null&&a.deleted_at?e.jsxs("div",{className:"p-8 bg-gray-50 dark:bg-dark-950 border-t border-gray-100 dark:border-dark-800 flex items-center justify-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 rounded-2xl",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs font-black text-red-700 dark:text-red-400 uppercase tracking-widest",children:"هذه التذكرة مؤرشفة للقراءة فقط"})]}):e.jsx("div",{className:"p-8 bg-white dark:bg-dark-900 border-t-2 border-gray-200 dark:border-dark-700 shrink-0",children:e.jsxs("form",{onSubmit:Y,className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(B,{label:"",value:u,onChange:r=>S(r.target.value),placeholder:"اكتب رسالتك هنا لمدير النظام...",disabled:(a==null?void 0:a.status)==="closed"||k.isPending,className:"bg-gray-50 dark:bg-dark-800 border-none shadow-none focus-within:ring-2 ring-primary/20"})}),e.jsx("button",{type:"submit",disabled:!u.trim()||k.isPending||(a==null?void 0:a.status)==="closed",className:"px-8 flex items-center justify-center bg-primary text-white rounded-2xl hover:bg-primary/90 disabled:opacity-30 disabled:grayscale transition-all shadow-xl shadow-primary/20 group overflow-hidden font-black uppercase text-[11px] tracking-widest gap-3 active:scale-95",children:k.isPending?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"إرسال"}),e.jsx(O,{className:"w-5 h-5 -rotate-90 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})})]})})]}):null}):e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 p-10 text-center bg-gray-50/20 dark:bg-dark-950/20",children:c==="archived"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-20 h-20 opacity-5 mb-6"}),e.jsx("h3",{className:"text-xl font-black text-gray-300 dark:text-gray-700",children:"سجل الأرشيف"}),e.jsx("p",{className:"mt-2 text-sm max-w-sm",children:"اختر تذكرة مؤرشفة لمراجعة تفاصيل المحادثة السابقة."})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-20 h-20 opacity-5 mb-6"}),e.jsx("h3",{className:"text-xl font-black text-gray-300 dark:text-gray-700",children:"اختر تذكرة لمشاهدة التفاصيل"}),e.jsx("p",{className:"mt-2 text-sm max-w-sm",children:"تاريخ مراسلاتك مع الدعم الفني متاح هنا دائماً، حتى بعد إغلاق التذاكر."})]})})})})};export{Se as default};
