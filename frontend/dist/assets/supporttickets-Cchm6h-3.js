import{f as ar,w as tr,r as p,t as sr,j as r,s as f,I as dr,X,v as G,C as nr,e as l}from"./index-CyxQwsQl.js";import{u as J}from"./adslot-DC0mcUoM.js";import{u as g}from"./useMutation-FrukBXWP.js";import{A as ir}from"./adminlayout-BZTWR09H.js";import{a as O}from"./helpers-CPSgdYRA.js";import{I as lr}from"./input-field-Cci2A17T.js";import{M as k}from"./drawer-Bj6KWlWm.js";import{S as or}from"./shield-B62tIG1s.js";import{L as cr}from"./link-DWpt8cXd.js";import{S as xr}from"./shield-check-C6HDylmK.js";import{C as mr}from"./clock-D6x6jZr7.js";import{A as pr}from"./archive-DV-nr6ty.js";import"./users-BsWlUMcl.js";import"./sparkles-ClcDe-Ep.js";import"./log-out-DA5HdhrL.js";import"./user-CAZ9w-Ov.js";import"./theme-toggle-DmE4dG8g.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],br=ar("send-horizontal",gr),Fr=()=>{var $,q,K,M,Q,F,L,E,P,I,A,U,z,D,R;const d=tr(),[t,o]=p.useState(null),[b,j]=p.useState(""),[u,V]=p.useState("all"),{showSuccess:h,showError:c,showConfirm:v}=sr(),{data:i,isLoading:W}=J({queryKey:["admin-tickets",u],queryFn:async()=>await l.get(`/admin/support/tickets?status=${u}`),refetchInterval:1e4});p.useEffect(()=>{o(null)},[u]);const{data:e,isLoading:Y,error:w}=J({queryKey:["admin-ticket",t],queryFn:async()=>t?await l.get(`/admin/support/tickets/${t}`):null,enabled:!!t,refetchInterval:5e3,retry:1});p.useEffect(()=>{w&&t&&(c("فشل تحميل بيانات التذكرة. قد تكون محذوفة أو غير موجودة."),o(null))},[w,t]);const y=g({mutationFn:a=>l.post(`/admin/support/tickets/${t}/reply`,a),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-ticket",t]}),d.invalidateQueries({queryKey:["admin-tickets"]}),d.invalidateQueries({queryKey:["admin-notifications-count"]}),j("")},onError:()=>c("فشل إرسال الرد")}),N=g({mutationFn:a=>l.patch(`/admin/support/tickets/${t}/status`,a),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-ticket",t]}),d.invalidateQueries({queryKey:["admin-tickets"]}),d.invalidateQueries({queryKey:["admin-notifications-count"]}),h("تم تحديث حالة التذكرة")}}),_=g({mutationFn:()=>l.delete(`/admin/support/tickets/${t}`),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-tickets"]}),d.invalidateQueries({queryKey:["admin-notifications-count"]}),h("تم نقل التذكرة للأرشيف بنجاح"),o(null)},onError:()=>c("فشل أرشفة التذكرة")}),x=g({mutationFn:()=>l.post(`/admin/support/tickets/${t}/restore`),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-ticket",t]}),d.invalidateQueries({queryKey:["admin-tickets"]}),h("تم استعادة التذكرة بنجاح")},onError:()=>c("فشل استعادة التذكرة")}),C=g({mutationFn:()=>l.delete(`/admin/support/tickets/${t}/force`),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-tickets"]}),d.invalidateQueries({queryKey:["admin-notifications-count"]}),h("تم حذف التذكرة نهائياً"),o(null)},onError:()=>c("فشل حذف التذكرة نهائياً")}),Z=a=>{a.preventDefault(),b.trim()&&y.mutate({message:b})},T=(a,s=!1)=>{if(s)return"bg-red-100/50 text-red-700 border-red-200";switch(a){case"open":return"bg-blue-100/50 text-blue-700 border-blue-200";case"in_progress":return"bg-yellow-100/50 text-yellow-700 border-yellow-200";case"resolved":return"bg-green-100/50 text-green-700 border-green-200";case"closed":return"bg-gray-100/50 text-gray-700 border-gray-200";default:return"bg-gray-100/50 text-gray-700 border-gray-200"}},S=(a,s=!1)=>s?"مؤرشفة":{all:"الكل",open:"مفتوحة",in_progress:"قيد المعالجة",resolved:"محلولة",closed:"مغلقة",archived:"الأرشيف"}[a]||a,rr=a=>({low:"منخفضة",medium:"متوسطة",high:"عالية",urgent:"عاجلة"})[a]||a,er=a=>{const s=O(a,!0),n=s.split("|");return n.length<3?r.jsx("span",{children:s}):r.jsxs("div",{className:"flex flex-col items-end gap-0",children:[r.jsxs("span",{className:"leading-tight",children:[n[0].trim()," | ",n[1].trim()]}),r.jsx("span",{className:"font-black text-[10px] opacity-60 leading-tight",children:n[2].trim()})]})};return r.jsx(ir,{title:"إدارة رسائل الدعم",noPadding:!0,leftSidebarContent:r.jsx("div",{className:"flex flex-col h-full bg-white dark:bg-dark-900 overflow-hidden -m-6",children:r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t?r.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-dark-800/50 border-b-2 border-gray-100 dark:border-dark-700 space-y-5 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 block",children:"إدارة التذكرة"}),r.jsxs("h4",{className:"text-lg font-black text-primary mb-1",children:["# ",t]}),r.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["مع: ",(($=e==null?void 0:e.tenant)==null?void 0:$.name)||"..."]})]}),r.jsx("button",{onClick:()=>o(null),className:"p-2 bg-white dark:bg-dark-800 border border-gray-100 dark:border-dark-700 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-all shadow-sm",children:r.jsx(X,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:"تحديث الحالة"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["open","in_progress","resolved","closed"].map(a=>r.jsx("button",{onClick:()=>N.mutate({status:a}),disabled:!!(e!=null&&e.deleted_at),className:`px-3 py-2.5 rounded-xl text-[10px] font-bold transition-all border-2 ${(e==null?void 0:e.status)===a?"bg-primary text-white border-primary shadow-lg shadow-primary/10":"bg-white dark:bg-dark-800 text-gray-500 dark:text-gray-400 border-gray-100 dark:border-dark-700 hover:border-gray-300 dark:hover:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700"} ${e!=null&&e.deleted_at?"opacity-50 grayscale":""}`,children:S(a)},a))})]}),e!=null&&e.deleted_at?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("button",{onClick:()=>x.mutate(),disabled:x.isPending,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-green-600 text-white rounded-xl font-black text-[11px] hover:bg-green-700 transition-all shadow-xl shadow-green-100 group active:scale-[0.98]",children:[r.jsx(f,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"}),"استعادة من الأرشيف"]}),r.jsxs("button",{onClick:async()=>{await v({title:"حذف نهائي",message:"هل أنت متأكد من حذف هذه التذكرة نهائياً؟ لا يمكن التراجع عن هذا الإجراء.",isDestructive:!0})&&C.mutate()},disabled:C.isPending,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-red-100 text-red-600 rounded-xl font-black text-[11px] hover:bg-red-200 transition-all border border-red-200 group active:scale-[0.98]",children:[r.jsx(G,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"حذف نهائي"]})]}):r.jsxs("button",{onClick:async()=>{await v({title:"أرشفة التذكرة",message:"هل أنت متأكد من نقل هذه التذكرة للأرشيف؟",isDestructive:!0})&&_.mutate()},disabled:_.isPending,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-red-600 text-white rounded-xl font-black text-[11px] hover:bg-red-700 transition-all shadow-xl shadow-red-100 group active:scale-[0.98]",children:[r.jsx(G,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"}),"أرشفة التذكرة"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 bg-white dark:bg-dark-800 p-4 rounded-2xl border border-gray-100 dark:border-dark-700 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"الأولوية"}),r.jsx("span",{className:`text-[10px] font-black px-2 py-0.5 rounded-full ${(e==null?void 0:e.priority)==="urgent"?"bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400":"bg-gray-50 dark:bg-dark-700 text-gray-700 dark:text-gray-300"}`,children:rr((e==null?void 0:e.priority)||"")})]}),r.jsxs("div",{className:"flex justify-between items-center border-t border-gray-50 dark:border-dark-700 pt-3",children:[r.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"التاريخ"}),r.jsx("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:((q=O(e==null?void 0:e.created_at).split("|")[1])==null?void 0:q.trim())||""})]})]})]})]}):r.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-dark-800 bg-gray-50/10 dark:bg-dark-800/20",children:r.jsx("nav",{className:"grid grid-cols-2 gap-2",children:[{id:"all",label:"الكل",icon:k,color:"text-gray-400"},{id:"open",label:"مفتوحة",icon:nr,color:"text-blue-500"},{id:"in_progress",label:"قيد المعالجة",icon:mr,color:"text-yellow-500"},{id:"resolved",label:"محلولة",icon:f,color:"text-green-500"},{id:"closed",label:"مغلقة",icon:X,color:"text-gray-500"},{id:"archived",label:"الأرشيف",icon:pr,color:"text-red-400"}].map(a=>{const s=u===a.id;return r.jsxs("button",{onClick:()=>V(a.id),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl transition-all font-bold text-[10px] relative group
                                                ${s?"bg-primary/10 dark:bg-primary/20 text-primary ring-1 ring-primary/20 dark:ring-primary/40 shadow-sm":"bg-gray-50/50 dark:bg-dark-800/30 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-800 hover:text-gray-900 dark:hover:text-white"}`,children:[r.jsx(a.icon,{className:`w-3.5 h-3.5 shrink-0 ${s?"text-primary":a.color}`}),r.jsx("span",{className:`flex-1 text-right truncate ${s?"text-primary":""}`,children:a.label})]},a.id)})})}),r.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-5 space-y-4 bg-gray-50/10 dark:bg-dark-900/20",children:W&&!i?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400 font-bold",children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-gray-200 border-t-gray-400 rounded-full mb-4"}),r.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black",children:"جاري التحديث..."})]}):((K=i==null?void 0:i.data)==null?void 0:K.length)===0?r.jsxs("div",{className:"text-center py-24 text-gray-300",children:[r.jsx(k,{className:"w-10 h-10 mx-auto mb-6 opacity-20"}),r.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"لا توجد تذاكر"})]}):r.jsx("div",{className:"space-y-4",children:(M=i==null?void 0:i.data)==null?void 0:M.map(a=>{var s,n,m;return r.jsxs("div",{onClick:()=>o(a.id),className:`p-5 rounded-[28px] cursor-pointer transition-all border-2 group relative overflow-hidden ${t===a.id?"bg-white dark:bg-dark-800 border-primary shadow-2xl shadow-primary/5 scale-[1.02]":"bg-white dark:bg-dark-900 border-transparent hover:border-gray-100 dark:hover:border-dark-800 shadow-sm"}`,children:[r.jsx("div",{className:"flex justify-between items-start mb-3",children:r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsxs("span",{className:"text-[9px] font-black text-gray-300 uppercase tracking-widest mb-1 group-hover:text-primary transition-colors",children:["#",a.id]}),r.jsx("h4",{className:`font-black text-[13px] line-clamp-1 transition-colors ${t===a.id?"text-primary":"text-gray-900 dark:text-gray-100 group-hover:text-primary"}`,children:a.subject})]})}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-50/50 dark:bg-dark-800/50 p-3 rounded-2xl border border-gray-100/50 dark:border-dark-700/50",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("div",{className:"w-7 h-7 shrink-0 rounded-xl bg-white dark:bg-dark-900 border border-gray-100 dark:border-dark-700 flex items-center justify-center font-black text-[10px] text-primary shadow-sm group-hover:rotate-6 transition-transform",children:(n=(s=a.tenant)==null?void 0:s.name)==null?void 0:n.substring(0,2).toUpperCase()}),r.jsx("span",{className:"text-[10px] font-black text-gray-700 dark:text-gray-300 truncate",children:(m=a.tenant)==null?void 0:m.name})]}),r.jsx("div",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase border shrink-0 ${T(a.status,!!a.deleted_at)}`,children:S(a.status,!!a.deleted_at)})]})]},a.id)})})})]})}),children:r.jsx("div",{className:"flex flex-col h-full bg-white dark:bg-dark-900 overflow-hidden relative",children:t?r.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[r.jsxs("div",{className:"bg-white/80 dark:bg-dark-900/80 backdrop-blur-md border-b border-gray-100 dark:border-dark-800 p-4 px-6 flex justify-between items-center shrink-0 z-20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-white dark:bg-dark-800 border-2 border-gray-100 dark:border-dark-700 flex items-center justify-center shadow-lg shrink-0 overflow-hidden group-hover:scale-110 transition-transform relative",children:[(Q=e==null?void 0:e.tenant)!=null&&Q.avatar_url?r.jsx("img",{src:e.tenant.avatar_url,alt:"",className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-lg font-black text-primary",children:((L=(F=e==null?void 0:e.tenant)==null?void 0:F.name)==null?void 0:L.substring(0,2).toUpperCase())||"U"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white dark:border-dark-900 rounded-full shadow-sm"})]}),r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-black text-[18px] text-gray-900 dark:text-white leading-tight",children:(E=e==null?void 0:e.tenant)==null?void 0:E.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase border shrink-0 ${((P=e==null?void 0:e.tenant)==null?void 0:P.status)==="active"?"bg-green-100/50 text-green-700 border-green-200":"bg-gray-100/50 text-gray-700 border-gray-200"}`,children:((I=e==null?void 0:e.tenant)==null?void 0:I.status)||"Active"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-400 dark:text-gray-500 font-bold uppercase tracking-widest leading-none",children:[((A=e==null?void 0:e.tenant)==null?void 0:A.uid)&&r.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 dark:bg-dark-800 px-2.5 py-1 rounded-md border border-gray-200 dark:border-dark-700",children:[r.jsx(or,{className:"w-3 h-3 text-primary/60"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300 antialiased",children:(U=e==null?void 0:e.tenant)==null?void 0:U.uid})]}),((z=e==null?void 0:e.tenant)==null?void 0:z.email)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"opacity-30",children:"•"}),r.jsxs("div",{className:"flex items-center gap-1.5 hover:text-primary transition-colors cursor-default bg-primary/5 dark:bg-primary/10 px-2.5 py-1 rounded-md border border-primary/10",children:[r.jsx(cr,{className:"w-3 h-3 text-primary/60"}),r.jsx("span",{className:"lowercase text-primary/80",children:(D=e==null?void 0:e.tenant)==null?void 0:D.email})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"hidden lg:flex flex-col items-end px-4 border-r border-gray-100 dark:border-dark-800",children:[r.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-tighter",children:"موضوع التذكرة"}),r.jsx("span",{className:"text-[12px] font-black text-gray-900 dark:text-gray-100 line-clamp-1 max-w-[200px]",children:e==null?void 0:e.subject})]}),r.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-50 dark:bg-dark-800 rounded-2xl border border-gray-100 dark:border-dark-700",children:[r.jsx("button",{onClick:()=>N.mutate({status:"resolved"}),className:"px-4 py-2 bg-white dark:bg-dark-900 text-green-600 border border-transparent hover:border-green-200 dark:hover:border-green-900/30 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-sm active:scale-95",children:"Mark Resolved"}),r.jsx("div",{className:`w-2 h-2 rounded-full mx-1 ${(e==null?void 0:e.status)==="open"?"bg-blue-500":(e==null?void 0:e.status)==="in_progress"?"bg-yellow-500":"bg-green-500"} animate-pulse`})]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 bg-gray-50/30 dark:bg-dark-800/30 no-scrollbar",children:Y&&!e?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full mb-4"}),r.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"جاري تحميل المحادثة..."})]}):r.jsx("div",{className:"space-y-10",children:(R=e==null?void 0:e.messages)==null?void 0:R.map(a=>{var s,n,m,B,H;return r.jsx("div",{className:`flex animate-in fade-in slide-in-from-bottom-2 duration-500 ${a.is_admin_reply?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"flex flex-col max-w-[85%] lg:max-w-[80%] group",children:[!a.is_admin_reply&&r.jsxs("div",{className:"flex items-center gap-2 mb-1.5 px-1 animate-in slide-in-from-right-2 duration-300",children:[r.jsx("span",{className:"text-[10px] font-black text-gray-900 dark:text-white uppercase tracking-tighter bg-gray-100 dark:bg-dark-700 px-2 py-0.5 rounded-md shadow-sm",children:(s=e==null?void 0:e.tenant)==null?void 0:s.name}),r.jsx("span",{className:"text-[9px] font-black text-primary/60 dark:text-primary/40 tracking-widest",children:(n=e==null?void 0:e.tenant)==null?void 0:n.uid})]}),r.jsxs("div",{className:"flex items-end gap-3 mb-1",children:[!a.is_admin_reply&&r.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white dark:bg-dark-800 border-2 border-gray-100 dark:border-dark-700 flex items-center justify-center shadow-lg shrink-0 overflow-hidden group-hover:scale-110 transition-transform",children:(m=e==null?void 0:e.tenant)!=null&&m.avatar_url?r.jsx("img",{src:e.tenant.avatar_url,alt:"",className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xs font-black text-primary",children:((H=(B=e==null?void 0:e.tenant)==null?void 0:B.name)==null?void 0:H.substring(0,2).toUpperCase())||"U"})}),r.jsx("div",{className:`relative rounded-[24px] px-6 py-4 shadow-md transition-all hover:shadow-xl ring-1 ${a.is_admin_reply?"bg-primary text-white rounded-bl-none shadow-primary/20 ring-primary/10":"bg-white dark:bg-dark-800 text-gray-900 dark:text-gray-100 border-2 border-gray-200 dark:border-dark-700 rounded-br-none ring-gray-100 dark:ring-dark-700"}`,children:r.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap font-bold antialiased",children:a.message})}),a.is_admin_reply&&r.jsx("div",{className:"w-10 h-10 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20 shrink-0 group-hover:scale-110 transition-transform border-4 border-white dark:border-dark-900",children:r.jsx(xr,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:`mt-1.5 flex items-center gap-3 font-black uppercase tracking-widest ${a.is_admin_reply?"justify-end text-primary/70":"justify-start text-gray-400 dark:text-gray-600"}`,children:[r.jsx("div",{className:"flex items-center gap-2 order-2",children:a.is_admin_reply?r.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/5 px-2 py-0.5 rounded-full border border-primary/10",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"}),r.jsx("span",{className:"text-[8px]",children:"تم الإرسال"})]}):r.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 dark:bg-dark-800 px-2 py-0.5 rounded-full border border-gray-200 dark:border-dark-700",children:[r.jsx(f,{className:"w-3.5 h-3.5 text-blue-500"}),r.jsx("span",{className:"text-[8px] opacity-80",children:"تم الاستلام"})]})}),r.jsx("div",{className:"order-1 text-[9px] bg-white/50 dark:bg-dark-950/20 px-2 py-0.5 rounded-full border border-gray-100 dark:border-dark-800",children:er(a.created_at)})]})]})},a.id)})})}),e!=null&&e.deleted_at?r.jsxs("div",{className:"p-8 bg-gray-50 dark:bg-dark-950 border-t-2 border-gray-200 dark:border-dark-700 flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 rounded-2xl",children:r.jsx(dr,{className:"w-5 h-5"})}),r.jsx("p",{className:"text-xs font-black text-red-700 dark:text-red-400 uppercase tracking-widest",children:"هذه التذكرة مؤرشفة للقراءة فقط"})]}),r.jsx("button",{onClick:()=>x.mutate(),disabled:x.isPending,className:"px-6 py-3 bg-primary text-white rounded-xl font-black text-[11px] hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:x.isPending?"جاري الاستعادة...":"استعادة التذكرة الآن"})]}):r.jsx("div",{className:"p-8 bg-white dark:bg-dark-900 border-t-2 border-gray-200 dark:border-dark-700 shrink-0",children:r.jsxs("form",{onSubmit:Z,className:"flex gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(lr,{label:"",value:b,onChange:a=>j(a.target.value),placeholder:"اكتب رد النظام هنا...",disabled:(e==null?void 0:e.status)==="closed"||y.isPending,className:"bg-gray-50 dark:bg-dark-800 border-none shadow-none focus-within:ring-2 ring-primary/20"})}),r.jsx("button",{type:"submit",disabled:!b.trim()||y.isPending||(e==null?void 0:e.status)==="closed",className:"h-[48px] w-[48px] flex items-center justify-center bg-primary text-white rounded-2xl hover:bg-primary/90 disabled:opacity-30 disabled:grayscale transition-all shadow-xl shadow-primary/20 group overflow-hidden active:scale-95 shrink-0",title:"إرسال الرد",children:y.isPending?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsx(br,{className:"w-5 h-5 -rotate-90 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})})]})})]}):r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 p-10 text-center bg-gray-50/20 dark:bg-dark-800/20",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(k,{className:"w-24 h-24 opacity-5"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-3 h-3 rounded-full bg-primary/20 animate-ping"})})]}),r.jsx("h3",{className:"text-xl font-bold text-gray-300",children:"اختر تذكرة لبدء المتابعة"}),r.jsx("p",{className:"mt-2 text-sm max-w-sm",children:"سيظهر محتوى المحادثة والردود هنا بمجرد اختيار تذكرة من القائمة الجانبية"})]})})})};export{Fr as default};
