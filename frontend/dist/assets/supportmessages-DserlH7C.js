import{g as f,x as W,v as Y,r as g,f as m,j as e,s as j,C as v,t as Q,X as Z,I as D}from"./index-CytmB-Er.js";import{u as N}from"./adslot-1WJBBd70.js";import{u as E}from"./useMutation-Cu2w5KoT.js";import{A as T}from"./applayout-hmzBXZ1U.js";import{a as z}from"./helpers-CPSgdYRA.js";import{a as B}from"./shield-overlay-jKLJv9mZ.js";import{S as H,A as R}from"./send-ByfnVC7o.js";import{M as X,P as ee}from"./sidebar-left-s-soE1BO.js";import"./shield-alert-D3dSgJZt.js";import"./log-out-DPAkzXIl.js";import"./loader-circle-Bj7yhw_M.js";import"./user-BVnW-pgT.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ae=f("circle-question-mark",re);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],G=f("history",se);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],w=f("life-buoy",te);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],de=f("tag",le),fe=()=>{var L,I,A,P;const h=W(),{showSuccess:_,showError:$}=Y(),[t,p]=g.useState(null),[b,C]=g.useState(""),[d,i]=g.useState(!1),[o,S]=g.useState("all"),{data:n,isLoading:J}=N({queryKey:["tenant-tickets",o],queryFn:()=>m.get(`/app/support/tickets?status=${o}`),refetchInterval:1e4}),{data:x,isLoading:q}=N({queryKey:["active-ticket"],queryFn:()=>m.get("/app/support/active-ticket"),refetchInterval:5e3}),c=(x==null?void 0:x.active_ticket)||((L=x==null?void 0:x.data)==null?void 0:L.active_ticket);g.useEffect(()=>{q||(c?t||(p(c.id),i(!1)):!t&&!d&&o==="active"&&i(!0))},[c,q,t,o]);const{data:y,isLoading:O}=N({queryKey:["tenant-ticket",t],queryFn:()=>m.get(`/app/support/tickets/${t}`),enabled:!!t&&!d,refetchInterval:5e3}),a=d?null:(y==null?void 0:y.data)||y,u=E({mutationFn:r=>m.post(`/app/support/tickets/${t}/reply`,r),onSuccess:()=>{h.invalidateQueries({queryKey:["tenant-ticket",t]}),h.invalidateQueries({queryKey:["active-ticket"]}),C(""),_("تم إرسال الرسالة بنجاح")},onError:()=>$("فشل إرسال الرسالة")}),k=E({mutationFn:r=>m.post("/app/support/tickets",r),onSuccess:r=>{h.invalidateQueries({queryKey:["active-ticket"]}),h.invalidateQueries({queryKey:["tenant-tickets"]}),_("تم إنشاء التذكرة بنجاح"),i(!1),p(r.id)},onError:r=>{var l,K;const s=((K=(l=r.response)==null?void 0:l.data)==null?void 0:K.error)||"فشل إنشاء التذكرة";$(s)}}),U=r=>{r.preventDefault(),!(!b.trim()||!t)&&u.mutate({message:b})},M=(r,s)=>{if(s)return"bg-red-100/50 text-red-700 border-red-200";switch(r){case"open":return"bg-blue-100/50 text-blue-700 border-blue-200";case"in_progress":return"bg-yellow-100/50 text-yellow-700 border-yellow-200";case"resolved":return"bg-green-100/50 text-green-700 border-green-200";case"closed":return"bg-gray-100/50 text-gray-700 border-gray-200";default:return"bg-gray-100/50 text-gray-700 border-gray-200"}},F=(r,s)=>s?"مؤرشفة":{open:"مفتوحة",in_progress:"قيد المعالجة",resolved:"محلولة",closed:"مغلقة"}[r]||r,V=r=>{const s=z(r,!0),l=s.split("|");return l.length<3?e.jsx("span",{children:s}):e.jsxs("div",{className:"flex flex-col items-end gap-0",children:[e.jsxs("span",{className:"leading-tight",children:[l[0].trim()," | ",l[1].trim()]}),e.jsx("span",{className:"font-black text-[10px] opacity-60 leading-tight",children:l[2].trim()})]})};return e.jsx(T,{title:"مركز الدعم الفني",noPadding:!0,leftSidebarContent:e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-dark-900 overflow-hidden -m-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-dark-800 bg-gray-50/10 dark:bg-dark-800/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2.5 bg-primary/10 text-primary rounded-xl",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-black text-gray-900 dark:text-gray-100 tracking-tight",children:"مركز المساعدة"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mt-0.5",children:"تصفية التذاكر"})]})]}),e.jsx("nav",{className:"space-y-1",children:[{id:"all",label:"الكل",icon:X,color:"text-gray-400"},{id:"open",label:"مفتوحة",icon:v,color:"text-blue-500"},{id:"in_progress",label:"قيد المعالجة",icon:Q,color:"text-yellow-500"},{id:"resolved",label:"محلولة",icon:j,color:"text-green-500"},{id:"closed",label:"مغلقة",icon:Z,color:"text-gray-500"},{id:"archived",label:"الأرشيف",icon:R,color:"text-red-400"}].map(r=>{const s=o===r.id;return e.jsxs("button",{onClick:()=>{S(r.id),p(null),i(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-2xl transition-all font-bold text-xs relative group
                                        ${s?"bg-primary/10 dark:bg-primary/20 text-primary ring-1 ring-primary/20 dark:ring-primary/40 shadow-lg shadow-primary/5":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-dark-800/50 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(r.icon,{className:`w-4 h-4 ${s?"text-primary":r.color}`}),e.jsx("span",{className:`flex-1 text-right ${s?"text-primary":""}`,children:r.label}),s&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"})]},r.id)})}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>{i(!0),p(null),S("all")},className:`w-full py-4 rounded-2xl font-black text-[11px] uppercase tracking-widest transition-all shadow-lg flex items-center justify-center gap-3 ${d||c?"bg-gray-100 dark:bg-dark-800 text-gray-400 dark:text-gray-600 cursor-not-allowed shadow-none":"bg-primary text-white hover:bg-primary/90 shadow-primary/10 active:scale-95"}`,disabled:d||!!c,title:c?"لا يمكن فتح تذكرة جديدة أثناء وجود تذكرة مفتوحة":"",children:[e.jsx(ee,{className:"w-5 h-5"}),c?"لديك تذكرة مفتوحة":"إنشاء تذكرة جديدة"]})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-50 dark:border-dark-800 bg-gray-50/5 dark:bg-dark-900/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-600",children:[e.jsx(G,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"التذاكر الحالية"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4 bg-gray-50/5",children:J?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400 font-bold space-y-3",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-gray-200 border-t-gray-400 rounded-full"}),e.jsx("span",{className:"text-[8px] uppercase tracking-widest font-black",children:"جاري التحميل..."})]}):((I=n==null?void 0:n.data)==null?void 0:I.length)===0?e.jsxs("div",{className:"text-center py-16 text-gray-300",children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-4 opacity-10"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-60",children:"لا توجد تذاكر حالية"})]}):e.jsx("div",{className:"space-y-4",children:(A=n==null?void 0:n.data)==null?void 0:A.map(r=>{var s;return e.jsxs("div",{onClick:()=>{p(r.id),i(!1)},className:`p-5 rounded-[28px] cursor-pointer transition-all border-2 group relative overflow-hidden ${t===r.id?"bg-white dark:bg-dark-800 border-primary shadow-2xl shadow-primary/5 scale-[1.02]":"bg-white dark:bg-dark-900 border-transparent hover:border-gray-100 dark:hover:border-dark-800 shadow-sm"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsxs("span",{className:`text-[9px] font-black uppercase tracking-widest mb-1 transition-colors ${t===r.id?"text-primary":"text-gray-300"}`,children:["#",r.id]}),e.jsx("h4",{className:`font-black text-[13px] line-clamp-1 transition-colors ${t===r.id?"text-primary":"text-gray-900 group-hover:text-primary"}`,children:r.subject})]})}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50/50 p-2.5 rounded-2xl border border-gray-100/50",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(Q,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"}),e.jsx("span",{className:"text-[10px] font-bold text-gray-500 truncate",children:(s=z(r.created_at).split("|")[1])==null?void 0:s.trim()})]}),e.jsx("div",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase border shrink-0 ${M(r.status,!!r.deleted_at)}`,children:F(r.status,!!r.deleted_at)})]})]},r.id)})})}),!d&&e.jsx("div",{className:"p-4 border-t border-gray-50 opacity-60 bg-gray-50/30",children:e.jsxs("div",{className:"bg-blue-50/50 p-3 rounded-2xl border border-dashed border-blue-100/50",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 text-blue-600",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:"اتفاقية الخدمة"})]}),e.jsx("p",{className:"text-[9px] text-blue-700/80 font-bold leading-relaxed px-1",children:"يتم الاحتفاظ بجميع تذاكرك هنا للرجوع إليها كأرشيف دائم."})]})})]}),children:e.jsx("div",{className:"flex flex-col h-full bg-gray-50/20 overflow-hidden relative",children:d?e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 lg:p-12 text-right",children:e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8 px-2",children:[e.jsx("div",{className:"p-4 bg-white dark:bg-dark-900 rounded-[24px] shadow-lg shadow-primary/5 text-primary border border-gray-100 dark:border-dark-800",children:e.jsx(w,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"فتح تذكرة دعم جديدة"}),e.jsx("p",{className:"text-gray-500 font-bold text-sm",children:"قم بملء النموذج أدناه لبدء محادثة فورية مع فريق الدعم المتخصص"})]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault();const s=new FormData(r.currentTarget);k.mutate({subject:s.get("subject"),message:s.get("message"),priority:s.get("priority")})},className:"flex-1 flex flex-col bg-white dark:bg-dark-900 rounded-[40px] shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-800 overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-8 lg:p-12 space-y-8 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs("div",{className:"space-y-2 group",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest px-2 group-focus-within:text-primary transition-colors",children:"موضوع التذكرة"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"subject",required:!0,placeholder:"لدي مشكلة في...",className:"w-full h-16 px-6 bg-gray-50 dark:bg-dark-950/50 border-2 border-transparent hover:bg-gray-100 focus:bg-white focus:border-primary/20 focus:ring-4 focus:ring-primary/5 rounded-3xl font-bold text-lg outline-none transition-all placeholder:text-gray-300 text-right"}),e.jsx(de,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-300 group-focus-within:text-primary transition-colors"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest px-2 group-focus-within:text-primary transition-colors",children:"مستوى الأهمية"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"low",label:"عادية",color:"bg-blue-50 text-blue-600 border-blue-100",hover:"hover:bg-blue-100"},{id:"medium",label:"متوسطة",color:"bg-gray-50 text-gray-600 border-gray-100",hover:"hover:bg-gray-100"},{id:"high",label:"عالية",color:"bg-orange-50 text-orange-600 border-orange-100",hover:"hover:bg-orange-100"},{id:"urgent",label:"حرجة",color:"bg-red-50 text-red-600 border-red-100",hover:"hover:bg-red-100"}].map(r=>e.jsxs("label",{className:"cursor-pointer relative group",children:[e.jsx("input",{type:"radio",name:"priority",value:r.id,defaultChecked:r.id==="medium",className:"peer sr-only"}),e.jsx("div",{className:`
                                                                flex flex-col items-center justify-center p-4 rounded-3xl border-2 transition-all duration-300
                                                                bg-white border-gray-100 text-gray-400 hover:border-gray-200
                                                                peer-checked:border-current peer-checked:shadow-lg peer-checked:scale-[1.02]
                                                                ${r.id==="low"?"peer-checked:text-blue-600 peer-checked:bg-blue-50/30 peer-checked:border-blue-200":""}
                                                                ${r.id==="medium"?"peer-checked:text-gray-700 peer-checked:bg-gray-50 peer-checked:border-gray-300":""}
                                                                ${r.id==="high"?"peer-checked:text-orange-500 peer-checked:bg-orange-50/30 peer-checked:border-orange-200":""}
                                                                ${r.id==="urgent"?"peer-checked:text-red-500 peer-checked:bg-red-50/30 peer-checked:border-red-200":""}
                                                            `,children:e.jsx("span",{className:"text-sm font-black uppercase tracking-tight",children:r.label})})]},r.id))})]}),e.jsxs("div",{className:"space-y-2 group flex-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest px-2 group-focus-within:text-primary transition-colors",children:"تفاصيل المشكلة"}),e.jsxs("div",{className:"relative h-full min-h-[200px]",children:[e.jsx("textarea",{name:"message",required:!0,placeholder:"يرجى وصف المشكلة بالتفصيل...",className:"w-full h-full min-h-[200px] p-6 bg-gray-50 dark:bg-dark-950 border-2 border-transparent hover:bg-gray-100 dark:hover:bg-dark-900 focus:bg-white dark:focus:bg-dark-800 focus:border-primary/20 focus:ring-4 focus:ring-primary/5 rounded-3xl font-bold text-base outline-none transition-all placeholder:text-gray-300 dark:placeholder:text-gray-700 resize-none text-right text-gray-900 dark:text-white"}),e.jsx("div",{className:"absolute left-6 bottom-6 pointer-events-none",children:e.jsx(ae,{className:"w-5 h-5 text-gray-300"})})]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-3xl bg-primary/5 dark:bg-primary/10 border border-primary/10 dark:border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-primary",children:[e.jsx(B,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-sm",children:"ضمان الجودة"})]}),e.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 leading-relaxed mb-4",children:"فريق الدعم لدينا يعمل على مدار الساعة لضمان حل المشاكل التقنية في أسرع وقت ممكن. متوسط وقت الرد هو 15 دقيقة."}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-wider text-primary/60 dark:text-primary/40",children:[e.jsx(j,{className:"w-3 h-3"}),e.jsx("span",{children:"دعم فني متخصص"})]})]}),e.jsxs("div",{className:"p-6 rounded-3xl bg-gray-50 dark:bg-dark-800/50 border border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-gray-400 dark:text-gray-500",children:[e.jsx(w,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-sm",children:"مركز المساعدة"})]}),e.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 leading-relaxed",children:"يمكنك أيضاً مراجعة قسم الأسئلة الشائعة، قد تجد حلاً فورياً لمشكلتك هناك قبل فتح تذكرة."})]})]})]})}),e.jsxs("div",{className:"p-8 bg-gray-50/50 dark:bg-dark-900 border-t border-gray-100 dark:border-dark-800 flex items-center justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-8 py-4 rounded-3xl font-black text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-800 transition-all text-sm",children:"إلغاء الأمر"}),e.jsx("button",{type:"submit",disabled:k.isPending,className:"px-10 py-4 bg-primary text-white rounded-3xl font-black text-sm shadow-xl shadow-primary/20 hover:bg-primary/90 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-3 disabled:opacity-70 disabled:grayscale",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"جاري الإنشاء..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"إرسال التذكرة"}),e.jsx(H,{className:"w-4 h-4 -rotate-90"})]})})]})]})]})}):t?e.jsx("div",{className:"flex flex-col h-full overflow-hidden animate-in fade-in duration-500",children:O&&!a?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full mb-4"}),e.jsx("p",{className:"text-[10px] font-black text-gray-400 dark:text-gray-600 uppercase tracking-widest",children:"جاري تحميل البيانات..."})]}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-dark-900 border-b border-gray-100 dark:border-dark-800 p-4 flex justify-between items-center shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${M(a.status,!!a.deleted_at).split(" ")[0].replace("/50","")}`}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"font-black text-sm text-gray-900 dark:text-white line-clamp-1 max-w-[200px] md:max-w-md",children:a.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 dark:text-gray-500 font-bold uppercase tracking-wider",children:[e.jsxs("span",{children:["#",a.id]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:F(a.status,!!a.deleted_at)})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 bg-gray-50/30 no-scrollbar",children:e.jsx("div",{className:"space-y-10",children:(P=a==null?void 0:a.messages)==null?void 0:P.map(r=>e.jsx("div",{className:`flex animate-in fade-in slide-in-from-bottom-2 duration-500 ${r.is_admin_reply?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[75%] rounded-[32px] px-8 py-6 shadow-sm relative transition-all hover:shadow-md ${r.is_admin_reply?"bg-white dark:bg-dark-800 text-gray-800 dark:text-gray-100 border-2 border-gray-100 dark:border-dark-700 rounded-tl-none ring-1 ring-gray-900/5 dark:ring-white/5":"bg-gradient-to-br from-primary to-primary/80 dark:from-primary/90 dark:to-primary/70 text-white rounded-tr-none shadow-xl shadow-primary/30"}`,children:[r.is_admin_reply&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-right",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(B,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"دعم النظام"})]}),e.jsx("p",{className:"text-[14px] leading-relaxed whitespace-pre-wrap font-bold text-right",children:r.message}),e.jsxs("div",{className:`text-[9px] mt-4 flex items-center justify-end gap-3 font-black uppercase tracking-tighter ${r.is_admin_reply?"text-gray-400 dark:text-gray-500":"text-primary-foreground/70"}`,children:[e.jsx("div",{className:"flex items-center gap-1.5 order-2",children:r.is_admin_reply?e.jsx(j,{className:"w-3.5 h-3.5 text-blue-500"}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/50"}),"تم الإرسال"]})}),e.jsx("div",{className:"order-1 text-right",children:V(r.created_at)})]})]})},r.id))})}),(a==null?void 0:a.status)==="closed"&&!(a!=null&&a.deleted_at)&&e.jsx("div",{className:"px-8 py-4 bg-yellow-50 dark:bg-yellow-900/20 border-y border-yellow-100 dark:border-yellow-800/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-yellow-800 dark:text-yellow-300",children:[e.jsx(v,{className:"w-5 h-5 shrink-0"}),e.jsx("p",{className:"text-sm font-bold",children:"هذه التذكرة مغلقة، لا يمكنك إرسال رسائل جديدة. إذا كنت بحاجة إلى مساعدة إضافية، يرجى فتح تذكرة جديدة."})]})}),a!=null&&a.deleted_at?e.jsxs("div",{className:"p-8 bg-gray-50 dark:bg-dark-950 border-t border-gray-100 dark:border-dark-800 flex items-center justify-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 rounded-2xl",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs font-black text-red-700 dark:text-red-400 uppercase tracking-widest",children:"هذه التذكرة مؤرشفة للقراءة فقط"})]}):e.jsx("div",{className:"p-8 bg-white dark:bg-dark-900 border-t border-gray-100 dark:border-dark-800 shrink-0",children:e.jsxs("form",{onSubmit:U,className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("input",{type:"text",value:b,onChange:r=>C(r.target.value),placeholder:"اكتب رسالتك لمدير النظام هنا...",className:"w-full bg-gray-50 dark:bg-dark-950 border-2 border-gray-100 dark:border-dark-800 rounded-2xl px-6 py-5 text-sm font-bold focus:ring-8 focus:ring-primary/5 focus:border-primary focus:bg-white dark:focus:bg-dark-800 outline-none transition-all duration-300 text-right text-gray-900 dark:text-white",disabled:(a==null?void 0:a.status)==="closed"||u.isPending}),e.jsx("div",{className:"absolute inset-y-0 left-5 flex items-center pointer-events-none opacity-20 group-focus-within:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"})})]}),e.jsxs("button",{type:"submit",disabled:!b.trim()||u.isPending||(a==null?void 0:a.status)==="closed",className:"w-16 h-16 flex items-center justify-center bg-primary text-white rounded-2xl hover:bg-primary/90 disabled:opacity-30 disabled:grayscale transition-all shadow-2xl shadow-primary/30 group overflow-hidden",children:[e.jsx("div",{className:"relative z-10",children:u.isPending?e.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(H,{className:"w-6 h-6 -rotate-90 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/5 to-white/25 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})})]}):null}):e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 p-10 text-center bg-gray-50/20 dark:bg-dark-950/20",children:o==="archived"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-20 h-20 opacity-5 mb-6"}),e.jsx("h3",{className:"text-xl font-black text-gray-300 dark:text-gray-700",children:"سجل الأرشيف"}),e.jsx("p",{className:"mt-2 text-sm max-w-sm",children:"اختر تذكرة مؤرشفة لمراجعة تفاصيل المحادثة السابقة."})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-20 h-20 opacity-5 mb-6"}),e.jsx("h3",{className:"text-xl font-black text-gray-300 dark:text-gray-700",children:"اختر تذكرة لمشاهدة التفاصيل"}),e.jsx("p",{className:"mt-2 text-sm max-w-sm",children:"تاريخ مراسلاتك مع الدعم الفني متاح هنا دائماً، حتى بعد إغلاق التذاكر."})]})})})})};export{fe as default};
