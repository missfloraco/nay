import{f as u,c as U,r as c,p as q,j as e,R as B,L as k,h as z,P as V,d as A,b as R,X as w,Q as _,O as K,u as Q,a as G,K as X}from"./index-CyxQwsQl.js";import{r as T,a as S}from"./helpers-CPSgdYRA.js";import{L as C,S as Y}from"./sparkles-ClcDe-Ep.js";import{P as J,S as Z,A as ee}from"./adslot-DC0mcUoM.js";import{L as D}from"./log-out-DA5HdhrL.js";import{C as ae,U as L}from"./user-CAZ9w-Ov.js";import{T as $}from"./theme-toggle-DmE4dG8g.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],E=u("building-2",te);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],se=u("command",re);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ne=u("lightbulb",le);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oe=u("menu",ie);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ne=u("message-square",ce);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],y=u("search",de);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F=u("settings",xe);function we({items:a,user:t,onLogout:n,settingsPath:s="/settings",onMenuClick:l}){U();const[o,i]=c.useState(!1),{primaryAction:d}=q(),x=c.useRef(null);c.useEffect(()=>{const g=h=>{x.current&&!x.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const m=T((t==null?void 0:t.avatar_url)||(t==null?void 0:t.avatarUrl))||`https://ui-avatars.com/api/?name=${(t==null?void 0:t.name)||"User"}&background=02aa94&color=fff`;return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-white/95 backdrop-blur-2xl border-t border-gray-100 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] px-6 py-2 flex items-center justify-between transition-all h-[70px] pb-safe",children:[e.jsx("div",{className:"flex-1 flex justify-start items-center",children:e.jsx("button",{onClick:l,className:"flex flex-col items-center justify-center transition-all text-gray-400 dark:text-gray-600 active:scale-95 hover:text-primary dark:hover:text-primary",children:e.jsx("div",{className:"p-3 rounded-2xl transition-all hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(oe,{className:"w-7 h-7"})})})}),e.jsx("div",{className:"px-2 -translate-y-8 relative z-50",children:d?e.jsx("button",{onClick:d.onClick,disabled:d.disabled||d.loading,className:`flex items-center justify-center w-16 h-16 ${d.variant==="danger"?"bg-red-600 shadow-red-500/40":"bg-primary shadow-primary/40"} text-white rounded-full shadow-2xl transform transition-all active:scale-90 hover:scale-105 ring-[6px] ring-white dark:ring-gray-950`,children:d.loading?e.jsx(C,{className:"w-8 h-8 animate-spin"}):B.createElement(d.icon||J,{className:"w-8 h-8 font-bold"})}):e.jsx(k,{to:"/app/pos",className:"flex items-center justify-center w-16 h-16 bg-gradient-to-tr from-blue-600 to-blue-700 text-white rounded-full shadow-2xl shadow-blue-500/40 transform transition-all active:scale-90 hover:scale-105 ring-[6px] ring-white dark:ring-gray-950",children:e.jsx(Z,{className:"w-8 h-8 font-bold"})})}),e.jsx("div",{className:"flex-1 flex justify-end items-center",ref:x,children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i(!o),className:"flex flex-col items-center justify-center transition-all active:scale-95",children:e.jsx("div",{className:`p-0.5 rounded-full border-2 transition-all ${o?"border-primary shadow-sm shadow-primary/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsx("img",{src:m,alt:"User",className:"w-10 h-10 rounded-full object-cover bg-gray-100 dark:bg-gray-800"})})}),o&&e.jsxs("div",{className:"absolute bottom-[70px] left-0 w-[200px] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-2 animate-in fade-in slide-in-from-bottom-4 duration-300 origin-bottom-left z-[60]",children:[e.jsxs("div",{className:"p-3 border-b border-gray-50 dark:border-gray-800 mb-1",children:[e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white truncate",children:(t==null?void 0:t.name)||"User"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 truncate",children:(t==null?void 0:t.uid)||""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(k,{to:s,onClick:()=>i(!1),className:"flex items-center gap-3 px-3 py-2.5 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 transition-colors",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-xs",children:"الإعدادات"})]}),e.jsxs("button",{onClick:()=>{n&&n(),i(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-xs",children:"تسجيل الخروج"})]})]})]})]})})]})})}const ke=()=>{const{settings:a}=z();return e.jsx("div",{className:"flex w-[250px] h-full border-l border-gray-300 dark:border-dark-600 px-4 items-center justify-center text-center bg-gray-50/10 dark:bg-dark-800/5",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em] mb-1.5 opacity-80 uppercase leading-none",children:"جميع الحقوق محفوظة"}),e.jsxs("span",{className:"text-[11px] font-black text-gray-700 dark:text-gray-400 leading-relaxed text-center",children:["منصة ",(a==null?void 0:a.appName)||"النظام"," © ",new Date().getFullYear(),e.jsx("br",{}),e.jsxs("span",{className:"text-[10px] opacity-80",children:[(a==null?void 0:a.companyName)&&e.jsx(e.Fragment,{children:"أحد مشاريع "}),a!=null&&a.companyLink?e.jsx("a",{href:a.companyLink,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors hover:underline decoration-primary/30 underline-offset-4 cursor-pointer",children:(a==null?void 0:a.companyName)||""}):e.jsx("span",{children:(a==null?void 0:a.companyName)||""})]})]})]})})},me=({user:a,onLogout:t,settingsPath:n})=>{const[s,l]=c.useState(!1),o=c.useRef(null);c.useEffect(()=>{const d=x=>{o.current&&!o.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const i=T((a==null?void 0:a.avatar_url)||(a==null?void 0:a.avatarUrl))||`https://ui-avatars.com/api/?name=${(a==null?void 0:a.name)||"User"}&background=02aa94&color=fff`;return e.jsxs("div",{className:"flex items-center h-full px-4 lg:px-6 lg:border-r border-gray-300 flex-shrink-0 justify-between relative header-user-section",ref:o,children:[e.jsxs("div",{className:"flex items-center gap-3 w-full cursor-pointer group select-none",onClick:()=>l(!s),children:[e.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[e.jsx("img",{src:i,alt:a==null?void 0:a.name,className:"w-10 h-10 rounded-full border border-gray-100 shadow-sm object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col items-start leading-none gap-1 overflow-hidden user-info-text",children:[e.jsx("span",{className:"text-sm font-black text-gray-900 truncate w-full text-right",children:(a==null?void 0:a.name)||"المستخدم"}),(a==null?void 0:a.uid)&&e.jsx("span",{className:"text-[10px] font-bold text-gray-400 tracking-wider",children:a.uid})]})]}),e.jsx("div",{className:`p-1.5 rounded-lg text-gray-400 group-hover:bg-gray-50 transition-all duration-200 ${s?"rotate-180 bg-gray-50 text-primary":""}`,children:e.jsx(ae,{className:"w-4 h-4"})})]}),s&&e.jsx("div",{className:"absolute top-[80px] left-4 w-[220px] bg-white rounded-2xl shadow-xl border border-gray-100 p-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(k,{to:n,onClick:()=>l(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-50 text-gray-700 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-500 group-hover:text-primary group-hover:bg-white transition-colors",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-sm",children:"الإعدادات"})]}),e.jsx("div",{className:"h-px bg-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{t(),l(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-50 text-red-600 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-50 text-red-500 group-hover:bg-red-100 transition-colors",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-sm",children:"تسجيل الخروج"})]})]})})]})},he=({appName:a,logoUrl:t,dashboardPath:n})=>e.jsx("div",{className:"flex items-center h-full px-4 lg:pr-8 lg:pl-6 lg:border-l border-gray-300 flex-shrink-0 justify-between header-logo-section",children:e.jsx(k,{to:n,className:"flex items-center gap-4 transition-all duration-300 hover:opacity-80 active:scale-95 group overflow-hidden",children:e.jsxs("div",{className:"flex items-center gap-3 truncate",children:[t?e.jsx("img",{src:t,alt:a,className:"h-9 w-auto max-w-[120px] object-contain group-hover:rotate-1 transition-transform logo-img",onError:s=>{s.currentTarget.style.display="none";const l=s.currentTarget.nextElementSibling;l instanceof HTMLElement&&(l.style.display="block")}}):null,e.jsx("span",{className:"text-sm lg:text-lg font-black text-gray-900 transition-colors truncate block tracking-tight app-name-text",children:a})]})})}),M=({variant:a="header-center"})=>{const{searchQuery:t,setSearchQuery:n,results:s,isSearching:l,clearSearch:o}=V(),{t:i}=A(),d=R(),[x,m]=c.useState(!1),[g,h]=c.useState(!1),j=c.useRef(null),f=c.useRef(null);c.useEffect(()=>{const r=p=>{var b,N;(p.key==="/"||p.ctrlKey&&p.key==="k")&&((b=document.activeElement)==null?void 0:b.tagName)!=="INPUT"&&(p.preventDefault(),h(!0)),p.key==="Escape"&&(m(!1),h(!1),(N=f.current)==null||N.blur())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),c.useEffect(()=>(g?(setTimeout(()=>{var r;return(r=f.current)==null?void 0:r.focus()},150),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[g]),c.useEffect(()=>{const r=p=>{j.current&&!j.current.contains(p.target)&&m(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const v=r=>{d(r),m(!1),h(!1),o()};return a==="header-left"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(!0),className:"w-12 h-12 flex items-center justify-center rounded-2xl bg-white border border-gray-100 text-gray-400 hover:text-primary hover:border-primary/20 hover:bg-primary/5 transition-all active:scale-95 shadow-sm","aria-label":i("common.search","بحث"),"aria-haspopup":"true","aria-expanded":g,children:e.jsx(y,{size:20,className:"transition-transform group-hover:scale-110"})}),g&&e.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center p-4 sm:p-6 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>h(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white/95 backdrop-blur-xl rounded-[2.5rem] shadow-[0_0_80px_-12px_rgba(0,0,0,0.3)] border border-white/20 flex flex-col overflow-hidden animate-in zoom-in-95 slide-in-from-top-10 duration-300 mt-4 sm:mt-20",children:[e.jsxs("div",{className:"relative flex items-center p-4 sm:p-6 border-b border-gray-100/50",children:[e.jsx(y,{className:"absolute right-8 w-6 h-6 text-primary"}),e.jsx("input",{ref:f,type:"text",value:t,onChange:r=>n(r.target.value),placeholder:i("common.search","ابحث عن مشترك، فاتورة، أو إعداد..."),className:"w-full bg-gray-50 border-none outline-none text-base sm:text-lg font-bold text-gray-900 pr-12 pl-12 py-3 rounded-2xl transition-all focus:bg-white focus:ring-2 focus:ring-primary/10",role:"combobox","aria-autocomplete":"list","aria-expanded":s.length>0}),e.jsxs("div",{className:"absolute left-10 flex items-center gap-2",children:[l&&e.jsx(C,{className:"w-4 h-4 text-primary animate-spin"}),t&&!l&&e.jsx("button",{onClick:()=>n(""),className:"p-1 hover:bg-gray-200 rounded-lg text-gray-400",children:e.jsx(w,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>h(!1),className:"mr-2 p-2 hover:bg-gray-100 rounded-xl text-gray-400 hidden sm:block",title:"Close",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto no-scrollbar p-2 sm:p-4 bg-white",children:s.length>0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:i("common.results","نتائج البحث")}),e.jsx("span",{className:"text-[10px] font-bold text-primary bg-primary/5 px-2 py-0.5 rounded-full",children:s.length})]}),s.map(r=>e.jsxs("button",{onClick:()=>v(r.url),className:"w-full flex items-center gap-4 p-3 sm:p-4 rounded-2xl hover:bg-gray-50 transition-all text-start group",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center flex-shrink-0 border border-gray-100 overflow-hidden group-hover:border-primary/20",children:r.image?e.jsx("img",{src:r.image.startsWith("/uploads")?`${_}${r.image}`:r.image,className:"w-full h-full object-cover",alt:""}):e.jsx("div",{className:"text-primary opacity-60",children:r.type==="tenant"?e.jsx(E,{className:"w-6 h-6"}):e.jsx(L,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-black text-gray-900 truncate group-hover:text-primary transition-colors",children:r.title}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 font-bold truncate",children:r.subtitle})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity pl-2",children:e.jsx("div",{className:"p-1.5 rounded-lg bg-primary/10 text-primary",children:e.jsx(y,{size:14})})})]},`${r.type}-${r.id}`))]}):t.length>=2&&!l?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-8 h-8 text-gray-200"})}),e.jsx("p",{className:"text-lg font-black text-gray-900",children:i("common.noResults","لا يوجد نتائج مطابقة")}),e.jsx("p",{className:"text-sm text-gray-400 font-bold mt-1",children:"تأكد من كتابة الاسم بشكل صحيح أو حاول البحث عن كلمة أخرى"})]}):t.length<2?e.jsxs("div",{className:"py-12 px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-primary/5 rounded-2xl border border-primary/10",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl text-primary shadow-sm",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-primary uppercase tracking-wider",children:i("common.quickSearch","البحث السريع")}),e.jsx("p",{className:"text-sm font-bold text-gray-600 leading-tight",children:"ابحث عن أسماء المشتركين، أرقام هواتفهم، أو حتى صفحات الإعدادات."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase mb-1",children:"اختصار سريع"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"اضغط / للبحث"})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase mb-1",children:"دقة البيانات"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"نتائج مباشرة من النظام"})]})]})]}):null}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex items-center justify-between text-[10px] font-black text-gray-400 hidden sm:flex",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded shadow-sm text-gray-600 font-mono",children:"ESC"})," ",i("common.toClose","للإغلاق")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded shadow-sm text-gray-600 font-mono",children:"Enter"})," ",i("common.toSelect","للاختيار")]})]}),e.jsx("span",{className:"flex items-center gap-1 text-primary/60",children:i("common.systemSync","البيانات متزامنة مع النظام")})]}),e.jsx("div",{className:"sm:hidden h-1 w-12 bg-gray-200 rounded-full mx-auto my-3"})]})]})]}):e.jsxs("div",{ref:j,className:"relative w-full max-w-[500px] group global-search-centered",role:"search",children:[e.jsxs("div",{className:`
                relative flex items-center gap-3 px-5 py-3 bg-gray-50 border transition-all duration-300 rounded-2xl
                ${x&&t.length>=2?"border-primary shadow-xl bg-white":"border-transparent hover:bg-gray-100 focus-within:bg-white focus-within:border-primary focus-within:ring-4 focus-within:ring-primary/5"}
            `,children:[e.jsx(y,{className:`w-5 h-5 transition-colors ${x||t?"text-primary":"text-gray-400"}`}),e.jsx("input",{ref:f,type:"text",value:t,onFocus:()=>m(!0),onChange:r=>{n(r.target.value),m(!0)},placeholder:i("common.search","بحث عن أي شيء..."),className:"flex-1 bg-transparent border-none outline-none text-sm font-bold text-gray-900 placeholder:text-gray-400 text-start",role:"combobox","aria-autocomplete":"list","aria-expanded":x&&s.length>0}),l&&e.jsx(C,{className:"w-4 h-4 text-primary animate-spin"}),t&&e.jsx("button",{onClick:()=>{var r;n(""),(r=f.current)==null||r.focus()},className:"p-1 hover:bg-gray-100 rounded-lg text-gray-400 transition-colors","aria-label":"مسح البحث",children:e.jsx(w,{size:14})}),e.jsx("div",{className:"hidden lg:flex items-center gap-1.5 px-2 py-1 bg-white border border-gray-200 rounded-md shadow-sm ml-1 group-focus-within:hidden",children:e.jsx("span",{className:"text-[10px] font-black text-gray-400",children:"/"})})]}),x&&t.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-3 bg-white rounded-3xl shadow-2xl border border-gray-100 py-3 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-300 max-h-[450px] overflow-y-auto no-scrollbar z-50",children:s.length>0?e.jsx("div",{className:"px-2 space-y-1",children:s.map(r=>e.jsxs("button",{onClick:()=>v(r.url),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/5 rounded-2xl transition-all text-start group/res",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gray-50 flex items-center justify-center flex-shrink-0 overflow-hidden border border-gray-100 group-hover/res:border-primary/20 transition-colors",children:r.image?e.jsx("img",{src:r.image.startsWith("/uploads")?`${_}${r.image}`:r.image,className:"w-full h-full object-cover",alt:""}):e.jsx("div",{className:"text-primary opacity-60",children:r.type==="tenant"?e.jsx(E,{size:20}):e.jsx(L,{size:20})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-black text-gray-900 group-hover/res:text-primary transition-colors truncate",children:r.title}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold truncate",children:r.subtitle})]})]},`${r.type}-${r.id}`))}):l?null:e.jsxs("div",{className:"px-6 py-10 text-center",children:[e.jsx(y,{className:"w-10 h-10 text-gray-200 mx-auto mb-3"}),e.jsxs("p",{className:"text-sm text-gray-400 font-black",children:['لا توجد نتائج مطابقة لـ "',t,'"']})]})})]})},Ce=({onMenuClick:a,onAsideClick:t,hasAside:n,title:s,appName:l,logoUrl:o,userName:i,userRole:d,className:x=""})=>{const{settings:m}=z(),{toggleRightDrawer:g,toggleLeftDrawer:h}=K(),{t:j}=A(),{user:f,logout:v}=Q(),{user:r,logout:p}=G(),b=window.location.pathname.startsWith("/admin"),N=b?f:r,O=l||m.appName||"",P=o||m.systemLogoUrl||m.logoUrl,H=b?"/admin":"/app";R();const W=U(),I=async()=>{W.pathname.startsWith("/admin")?await v():await p()};return e.jsxs("header",{className:`sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200 flex items-center justify-between transition-colors h-[90px] global-header ${x}`,children:[e.jsx("div",{className:"flex items-center w-auto lg:w-[250px] flex-shrink-0 global-header-branding",children:e.jsx(he,{appName:O,logoUrl:P,dashboardPath:H})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center lg:justify-between h-full px-4 lg:px-8 gap-4 relative",children:[e.jsx("div",{className:"flex items-center group/title page-title-heading truncate absolute lg:relative left-1/2 lg:left-0 -translate-x-1/2 lg:translate-x-0",children:e.jsx("h1",{className:"text-sm lg:text-base font-bold text-gray-400 px-3 truncate group-hover/title:text-primary transition-colors flex items-center gap-2",children:s})}),e.jsx("div",{className:"hidden sm:flex items-center justify-center flex-1 max-w-[600px] mx-auto",children:e.jsx(M,{variant:"header-center"})})]}),e.jsxs("div",{className:"flex items-center w-auto lg:w-[250px] justify-end flex-shrink-0 px-4 lg:px-0 gap-3",children:[e.jsxs("div",{className:"flex sm:hidden items-center gap-2",children:[e.jsx(M,{variant:"header-left"}),e.jsx($,{})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 w-full justify-end",children:[e.jsx($,{}),e.jsx("div",{className:"h-8 w-px bg-gray-200 mx-1"}),e.jsx(me,{user:N,onLogout:I,settingsPath:b?"/admin/settings":"/app/settings"})]})]})]})},_e=({type:a,tenant:t})=>{const n=a==="tenant";return e.jsx("div",{className:"w-[250px] h-full bg-gray-50/10 dark:bg-dark-800/5 border-r border-gray-300 dark:border-dark-600 flex items-center justify-center px-4 transition-all group overflow-hidden relative select-none",children:e.jsx("div",{className:"flex flex-col items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em] mb-1.5 opacity-80 uppercase leading-none",children:"فترة الاشتراك ونهايتها"}),e.jsxs("div",{className:"text-[11px] font-black text-gray-700 dark:text-gray-400 leading-relaxed text-center",children:[e.jsxs("span",{children:["بدأ في ",S((t==null?void 0:t.subscription_started_at)||(t==null?void 0:t.created_at),!0).split("|")[0]]}),e.jsx("br",{}),e.jsxs("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 font-bold opacity-90",children:["تاريخ الانتهاء: ",S((t==null?void 0:t.subscription_ends_at)||(t==null?void 0:t.trial_expires_at),!0).split("|")[0]]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em] mb-1.5 opacity-80 uppercase leading-none",children:"حالة النظام والعمليات"}),e.jsxs("div",{className:"text-[11px] font-black text-gray-700 dark:text-gray-400 leading-relaxed text-center",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-500",children:"جداول البيانات مستقرة"}),e.jsx("br",{}),e.jsxs("span",{className:"text-[10px] opacity-80",children:["آخر فحص: ",new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})]})]})]})})})},Se=({children:a,contentClassName:t="",noPadding:n=!1,noBorder:s=!1})=>{const{exportData:l,openModal:o}=X();return e.jsxs("aside",{className:`left-sidebar-root bg-white ${s?"":"border-r border-gray-200"} z-40 transition-all duration-500 ease-in-out flex flex-col w-[250px] ${t}`,children:[e.jsx("div",{className:`flex-1 overflow-y-auto no-scrollbar ${n?"p-0 space-y-0":"p-6 space-y-1.5"}`,children:a||e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4 opacity-60",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl flex items-center justify-center mb-4 animate-pulse",children:e.jsx(Y,{className:"w-8 h-8 text-primary/40"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-wider",children:"عمود قابل للتخصيص"}),e.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-2xl border border-blue-100/50",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-[10px] font-bold text-blue-600 leading-relaxed text-right",children:"يمكنك تخصيص هذا العمود لعرض:"})]}),e.jsxs("ul",{className:"text-[9px] text-blue-500/80 space-y-1 font-bold text-right",children:[e.jsx("li",{children:"• فلاتر البحث والتصفية"}),e.jsx("li",{children:"• إحصائيات سريعة"}),e.jsx("li",{children:"• قوائم جانبية"}),e.jsx("li",{children:"• إعدادات وخيارات"}),e.jsx("li",{children:"• أي محتوى مخصص"})]})]}),e.jsx("p",{className:"text-[8px] font-black text-gray-300 uppercase tracking-widest",children:"استخدم leftSidebarContent"})]})]})}),!window.location.pathname.startsWith("/admin")&&e.jsx(ee,{placement:"ad_sidebar_square",className:"w-[250px] h-[250px] aspect-square border-t border-gray-200 mt-auto",showPlaceholder:!1})]})},Le=({isOpen:a,onClose:t,side:n="right",children:s,title:l,width:o="320px"})=>(c.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),e.jsx("aside",{className:`fixed top-0 bottom-0 w-[85%] bg-white dark:bg-dark-900 z-[70] shadow-2xl transition-transform duration-300 ease-in-out ${n==="right"?a?"translate-x-0":"translate-x-[100%]":a?"translate-x-0":"-translate-x-[100%]"} ${n==="right"?"right-0":"left-0"}`,style:{maxWidth:o},dir:"rtl",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white",children:l||"القائمة"}),e.jsx("button",{onClick:t,className:"p-2 rounded-xl bg-gray-50 dark:bg-white/5 text-gray-500 hover:text-red-500 transition-colors",children:e.jsx(w,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:s})]})})]}));export{we as B,ke as C,Le as D,Ce as H,Se as L,Ne as M,y as S,_e as a};
