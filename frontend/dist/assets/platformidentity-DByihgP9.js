import{h as P,q as T,p as q,r,j as e,S as I,l as z}from"./index-ljXU23zv.js";import{A,P as O}from"./adminlayout-Yn-e0X52.js";import{C as u}from"./circularimageupload-BtiN9U1O.js";import{I as L}from"./image-QgWKVxoL.js";import{T as R}from"./type-Dci3rrg-.js";import{L as B}from"./loader-circle-D5B7Ya48.js";import{S as K}from"./save-BIZD7XO8.js";import"./adslot-DvSxPRYf.js";import"./sidebar-left-CkMyBbHc.js";import"./helpers-CPSgdYRA.js";import"./log-out-DHuL-UPz.js";import"./user-BhkJww6t.js";import"./users-DtEpYzC0.js";function ne(){const{settings:o,updateSettings:$,refreshSettings:U,loading:N}=P(),{showToast:w}=T(),{setPrimaryAction:F}=q(),[C,S]=r.useState(!1),[G,H]=r.useState(0),[s,l]=r.useState({app_name:o.appName||"",primary_color:o.primaryColor||"#2a8cff",secondary_color:o.secondaryColor||"#ffc108",font_family:o.fontFamily||"Default",company_name:o.companyName||"",company_link:o.companyLink||"",custom_font_url:o.customFontUrl||"",custom_heading_font_url:o.customHeadingFontUrl||""}),[t,x]=r.useState({system_logo:null,favicon:null,custom_font:null,custom_heading_font:null});r.useEffect(()=>{(t.custom_font||t.custom_heading_font||s.custom_font_url||s.custom_heading_font_url)&&l(a=>({...a,font_family:"Custom"}))},[t.custom_font,t.custom_heading_font,s.custom_font_url,s.custom_heading_font_url]);const[h,_]=r.useState(!1),[y,b]=r.useState(!1),[d,v]=r.useState(!1),[m,k]=r.useState(!1);r.useEffect(()=>{!N&&o&&l({app_name:o.appName||"",primary_color:o.primaryColor||"#2a8cff",secondary_color:o.secondaryColor||"#ffc108",font_family:o.fontFamily||"Default",company_name:o.companyName||"",company_link:o.companyLink||"",custom_font_url:o.customFontUrl||"",custom_heading_font_url:o.customHeadingFontUrl||""})},[o,N]),r.useEffect(()=>{F(null)},[F]);const f=(a,i)=>{x(c=>({...c,[a]:i})),a==="system_logo"&&_(!1),a==="favicon"&&b(!1),a==="custom_font"&&v(!1),a==="custom_heading_font"&&k(!1)},p=a=>{x(i=>({...i,[a]:null})),a==="system_logo"&&_(!0),a==="favicon"&&b(!0),a==="custom_font"&&v(!0),a==="custom_heading_font"&&k(!0)},D=async()=>{var a,i;S(!0);try{const c=t.system_logo||t.favicon||t.custom_font||t.custom_heading_font||h||y||d||m,g=t.custom_font||t.custom_heading_font||!d&&o.customFontFile||!m&&o.customHeadingFontFile||s.custom_font_url||s.custom_heading_font_url?"Custom":"Default";if(c){const n=new FormData;t.system_logo?n.append("logo_url",t.system_logo):h&&n.append("remove_logo_url","1"),t.favicon?n.append("favicon_url",t.favicon):y&&n.append("remove_favicon_url","1"),t.custom_font?n.append("custom_font_file",t.custom_font):d&&n.append("remove_custom_font_file","1"),t.custom_heading_font?n.append("custom_heading_font_file",t.custom_heading_font):m&&n.append("remove_custom_heading_font_file","1"),Object.entries(s).forEach(([j,E])=>{j==="font_family"?n.append(j,g):n.append(j,E)}),await I.updateSettings("admin",n)}else await I.updateSettings("admin",{...s,font_family:g});await U(),H(n=>n+1),x({system_logo:null,favicon:null,custom_font:null,custom_heading_font:null}),_(!1),b(!1),v(!1),k(!1),w("تم تحديث هوية المنصة بنجاح","success")}catch(c){z.error(c);const g=((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"حدث خطأ أثناء الحفظ";w(g,"error")}finally{S(!1)}};return e.jsx(A,{title:"هوية المنصة",noPadding:!0,children:e.jsx("div",{className:"h-full w-full bg-white dark:bg-dark-950 p-6 lg:p-12 animate-in fade-in duration-500 overflow-y-auto no-scrollbar pb-44",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-12 w-full",children:[e.jsxs("div",{className:"flex items-center gap-6 border-b border-gray-100 dark:border-dark-800 pb-8 group",children:[e.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/10 rounded-[2rem] text-indigo-600 shadow-inner group-hover:scale-110 transition-transform",children:e.jsx(O,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-3xl text-gray-900 dark:text-white tracking-tight",children:"هوية المنصة"}),e.jsx("p",{className:"text-base font-bold text-gray-400 dark:text-gray-500",children:"تخصيص الاسم والشعار والخطوط العامة للمنصة"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-12 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 rounded-[2.5rem] bg-gray-50/50 dark:bg-dark-900/40 border border-gray-100 dark:border-dark-800 backdrop-blur-sm",children:[e.jsx(u,{image:h?null:t.system_logo?URL.createObjectURL(t.system_logo):o.systemLogoUrl||o.logoUrl,onImageChange:a=>f("system_logo",a),onRemove:()=>p("system_logo"),uploadId:"system-logo-upload",label:"شعار النظام",size:"xl",variant:"circle",accept:".svg,.png,.jpg,.jpeg,.gif,.webp",fallbackIcon:e.jsx(L,{className:"w-12 h-12"})}),e.jsx("span",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"شعار النظام"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 rounded-[2.5rem] bg-gray-50/50 dark:bg-dark-900/40 border border-gray-100 dark:border-dark-800 backdrop-blur-sm",children:[e.jsx(u,{image:y?null:t.favicon?URL.createObjectURL(t.favicon):o.faviconUrl||null,onImageChange:a=>f("favicon",a),onRemove:()=>p("favicon"),uploadId:"favicon-upload",label:"Favicon",size:"md",variant:"square",accept:".svg,.png,.jpg,.jpeg,.ico",fallbackIcon:e.jsx(L,{className:"w-8 h-8 text-gray-400"})}),e.jsx("span",{className:"mt-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"أيقونة المتصفح"})]})]}),e.jsxs("div",{className:"space-y-8 w-full py-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"اسم المنصة"}),e.jsx("input",{type:"text",value:s.app_name,onChange:a=>l({...s,app_name:a.target.value}),className:"input-field",placeholder:"أدخل اسم المنصة"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"اللون الأساسي"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white dark:bg-dark-900 border-2 border-gray-200 dark:border-dark-700 transition-all hover:border-primary/30",children:[e.jsx("input",{type:"color",value:s.primary_color,onChange:a=>l({...s,primary_color:a.target.value}),className:"w-12 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0 overflow-hidden"}),e.jsx("span",{className:"font-mono text-sm font-black dir-ltr text-gray-600 dark:text-gray-300",children:s.primary_color})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"اللون الثانوي"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white dark:bg-dark-900 border-2 border-gray-200 dark:border-dark-700 transition-all hover:border-secondary/30",children:[e.jsx("input",{type:"color",value:s.secondary_color,onChange:a=>l({...s,secondary_color:a.target.value}),className:"w-12 h-12 rounded-xl cursor-pointer bg-transparent border-none p-0 overflow-hidden"}),e.jsx("span",{className:"font-mono text-sm font-black dir-ltr text-gray-600 dark:text-gray-300",children:s.secondary_color})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-50 dark:border-dark-800 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-10 p-8 rounded-[2rem] bg-indigo-50/30 dark:bg-indigo-900/10 border border-indigo-100/50 dark:border-indigo-900/20 animate-in slide-in-from-top-4 duration-500",children:[e.jsx(u,{image:d?null:t.custom_font?"font-uploaded":o.customFontFile?"font-existing":null,onImageChange:a=>f("custom_font",a),onRemove:()=>p("custom_font"),uploadId:"custom-font-upload",label:"ملف الخط",size:"md",variant:"square",isImage:!1,accept:".ttf,.woff,.woff2,.otf",fallbackIcon:e.jsx(R,{className:"w-8 h-8 text-indigo-400"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black text-gray-900 dark:text-white",children:"خط النصوص والفقرات (Body Font)"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1.5",children:"قم برفع ملف الخط (.ttf, .woff, .otf) أو أدخل رابط مباشر لملف الخط."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"رابط خط خارجي (اختياري)"}),e.jsx("input",{type:"url",value:s.custom_font_url,onChange:a=>l({...s,custom_font_url:a.target.value}),placeholder:"https://example.com/fonts/my-font.woff2",className:"input-field text-left dir-ltr",dir:"ltr"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"إذا تم رفع ملف، سيتم تجاهل الرابط."})]}),t.custom_font&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 text-xs font-black",children:["تم اختيار ملف: ",t.custom_font.name]}),!d&&(o.customFontFile||t.custom_font||s.custom_font_url)?e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 text-xs font-black",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"خط النصوص مفعل"]}):e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-xs font-black",children:"يتم استخدام الخط الافتراضي للنصوص"})]})]}),e.jsxs("div",{className:"flex items-center gap-10 p-8 rounded-[2rem] bg-pink-50/30 dark:bg-pink-900/10 border border-pink-100/50 dark:border-pink-900/20 animate-in slide-in-from-top-4 duration-500 delay-100",children:[e.jsx(u,{image:m?null:t.custom_heading_font?"font-uploaded":o.customHeadingFontFile?"font-existing":null,onImageChange:a=>f("custom_heading_font",a),onRemove:()=>p("custom_heading_font"),uploadId:"custom-heading-font-upload",label:"ملف خط العناوين",size:"md",variant:"square",isImage:!1,accept:".ttf,.woff,.woff2,.otf",fallbackIcon:e.jsx(R,{className:"w-8 h-8 text-pink-400"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black text-gray-900 dark:text-white",children:"خط العناوين (Heading Font)"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1.5",children:"قم برفع ملف الخط أو أدخل رابط مباشر لاستخدامه للعناوين."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"رابط خط خارجي (اختياري)"}),e.jsx("input",{type:"url",value:s.custom_heading_font_url,onChange:a=>l({...s,custom_heading_font_url:a.target.value}),placeholder:"https://example.com/fonts/heading-font.ttf",className:"input-field text-left dir-ltr",dir:"ltr"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"إذا تم رفع ملف، سيتم تجاهل الرابط."})]}),t.custom_heading_font&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-pink-100 dark:bg-pink-900/40 text-pink-600 dark:text-pink-400 text-xs font-black",children:["تم اختيار ملف: ",t.custom_heading_font.name]}),!m&&(o.customHeadingFontFile||t.custom_heading_font||s.custom_heading_font_url)?e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 text-xs font-black",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"خط العناوين مفعل"]}):e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 text-xs font-black",children:"سيتم استخدام خط النصوص للعناوين أيضاً"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-50 dark:border-dark-800 space-y-6",children:[e.jsxs("h3",{className:"text-lg font-black text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-purple-500 rounded-full"}),"حقوق النشر والملكية"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"اسم الشركة المالكة"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"text",value:s.company_name,onChange:a=>l({...s,company_name:a.target.value}),className:"input-field pl-10",placeholder:"مثال: اسم الشركة المالكة"})}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 mr-1",children:"سيظهر في ذيل الصفحة: أحد مشاريع شركة [الاسم]"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mr-1",children:"رابط الشركة (اختياري)"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"url",value:s.company_link,onChange:a=>l({...s,company_link:a.target.value}),onBlur:()=>{s.company_link&&!/^https?:\/\//i.test(s.company_link)&&l(a=>({...a,company_link:`https://${s.company_link}`}))},className:"input-field pl-10 text-left",dir:"ltr",placeholder:"https://example.com"})}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 mr-1",children:"عند الضغط على اسم الشركة سيتم التوجيه لهذا الرابط."})]})]})]}),e.jsx("div",{className:"pt-12 border-t border-gray-100 dark:border-dark-800 flex justify-end",children:e.jsxs("button",{onClick:D,disabled:C,className:"w-full md:w-auto px-12 h-16 flex items-center justify-center gap-3 bg-primary hover:bg-primary-hover text-white rounded-[1.5rem] font-black shadow-2xl shadow-primary/30 transition-all active:scale-95 disabled:opacity-50 min-w-[240px] text-lg",children:[C?e.jsx(B,{className:"w-6 h-6 animate-spin"}):e.jsx(K,{className:"w-6 h-6"}),e.jsx("span",{children:"حفظ التعديلات"})]})})]})]})]})})})}export{ne as default};
