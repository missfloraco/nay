import{f as z,T as F,s as R,j as e,t as J,r as n,v as le,e as v,p as ie,l as oe,C as ne,X as de}from"./index-3tzHmsOf.js";import{r as ce,a as X}from"./helpers-CPSgdYRA.js";import{A as me}from"./adminlayout-ZagtXe8m.js";import{T as d}from"./textsadminpanel-DB4O06i_.js";import{V as pe}from"./btn-crud-CvLbGUX8.js";import{I as xe,D as H,A as ue,T as ge}from"./table-cells-0QReMnwe.js";import{C as K}from"./clock-DKj3O3SJ.js";import{C as be}from"./circularimageupload-DcvZpDQo.js";import{C as he}from"./constants-DPRNOWFl.js";import{I as h}from"./input-field-CqDw_XU4.js";import{S as fe}from"./select-field-D_jTowMW.js";import{M as V}from"./mail-wdynseuz.js";import{S as Y}from"./shield-C-QUnZFc.js";import{C as B,D as ye}from"./dollar-sign-Dof078Ys.js";import{P as Ne,L as ke}from"./phone-zcv6c-Q-.js";import{G as _e}from"./globe-Di9bsZY2.js";import{I as je}from"./image-BNsNIQN0.js";import{L as we,S as ve}from"./sparkles-BZvr4uos.js";import{S as Se}from"./save-CtIa-MK8.js";import{U as Ce}from"./users-m4cUupYH.js";import{P as W}from"./adslot-DgJhm0dE.js";import{E as Te}from"./eye-KtuTuuxE.js";import{U as Ee}from"./user-BF6dZPLy.js";import"./sidebar-left-SDr9qEmE.js";import"./log-out-DEKz7YE3.js";import"./database-BLedNJg5.js";import"./chevron-right-BQpY62PU.js";import"./sun-BINGn8lG.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z=z("ban",Ae);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Re=z("key",De);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Me=z("log-in",$e),ee={pending:{icon:F,label:"قيد الانتظار",className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700"},trial:{icon:K,label:"تجربة",className:"bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800"},active:{icon:R,label:"مفعّل",className:"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800"},expired:{icon:F,label:"منتهية",className:"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800"},disabled:{icon:Z,label:"معطّل",className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700"}};function Ie({status:r,trialExpiresAt:$}){const f=ee[r],u=f.icon;return e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-bold ${f.className}`,children:[e.jsx(u,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:f.label})]})}function Le({tenant:r,tenants:$,onSelect:f,onUpdate:u,onNavigateToPayments:M}){const{showSuccess:S,showError:y,showConfirm:k}=J(),[t,p]=n.useState({name:"",email:"",whatsapp:"",country_code:"",status:"",trial_expires_at:"",subscription_ends_at:"",password:"",ads_enabled:!0}),[C,_]=n.useState(null),[j,U]=n.useState(!1),[w,T]=n.useState(null),[P,g]=n.useState(!1);n.useEffect(()=>{r&&(p({name:r.name,email:r.email||"",whatsapp:r.whatsapp||"",country_code:r.country_code||"",status:r.status,trial_expires_at:r.trial_expires_at?r.trial_expires_at.split("T")[0]:"",subscription_ends_at:r.subscription_ends_at?r.subscription_ends_at.split("T")[0]:"",password:"",ads_enabled:r.ads_enabled??!0}),T(ce(r.avatar_url)),_(null),g(!1))},[r]);const E=async l=>{var x,c;if(l.preventDefault(),!!r)try{U(!0);const s=new FormData;s.append("_method","PUT"),s.append("name",t.name),s.append("email",t.email),s.append("whatsapp",t.whatsapp),s.append("country_code",t.country_code),t.trial_expires_at&&s.append("trial_expires_at",t.trial_expires_at),t.subscription_ends_at&&s.append("subscription_ends_at",t.subscription_ends_at),t.status&&s.append("status",t.status),t.password&&s.append("admin_password",t.password),s.append("ads_enabled",t.ads_enabled?"1":"0"),P?s.append("remove_avatar","1"):C&&s.append("avatar",C),await v.post(`/admin/tenants/${r.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),S(d.MESSAGES.SUCCESS),u()}catch(s){y(((c=(x=s.response)==null?void 0:x.data)==null?void 0:c.message)||d.MESSAGES.ERROR)}finally{U(!1)}},I=async()=>{var x,c;if(!(!r||!await k({title:"الدخول كمسؤول للنظام (محاكاة)",message:`هل أنت متأكد من رغبتك في الدخول إلى نظام المستأجر "${r.name}" كمسؤول؟ ستتمكن من عرض لوحة التحكم والبيانات الخاصة به.`,confirmLabel:"دخول ومحاكاة",cancelLabel:"إلغاء"})))try{const s=await v.post(`/admin/tenants/${r.id}/impersonate`);s.token?window.location.href=`/login?impersonate_token=${s.token}`:y("لم يتم الحصول على رمز الدخول")}catch(s){y(((c=(x=s.response)==null?void 0:x.data)==null?void 0:c.message)||"فشل عملية المحاكاة")}},L=async l=>{var c,s;if(!(!r||!await k({title:l==="enable"?"تفعيل المشترك؟":"تعطيل المشترك؟",message:l==="enable"?"سيتمكن المشترك من الدخول للنظام":"سيتم منع المشترك من الدخول للنظام"})))try{await v.post(`/admin/tenants/${r.id}/${l}`),S(d.MESSAGES.SUCCESS),u()}catch(O){y(((s=(c=O.response)==null?void 0:c.data)==null?void 0:s.message)||d.MESSAGES.ERROR)}},A=async()=>{var x,c;if(!(!r||!await k({title:"حذف المشترك؟",message:"سيتم نقل المشترك إلى سلة المحذوفات",isDestructive:!0})))try{await v.delete(`/admin/tenants/${r.id}`),S(d.MESSAGES.SUCCESS),u()}catch(s){y(((c=(x=s.response)==null?void 0:x.data)==null?void 0:c.message)||d.MESSAGES.ERROR)}},i=l=>{_(l),T(URL.createObjectURL(l)),g(!1)},m=()=>{_(null),T(null),g(!0)},D=[...he.map(l=>({value:l.code,label:l.name})),{value:"other",label:"أخرى"}];return e.jsx("div",{className:"h-full flex flex-col bg-white dark:bg-gray-800 overflow-hidden relative",children:r?e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden animate-in slide-in-from-right duration-300",children:[e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:e.jsxs("form",{id:"tenant-details-form",onSubmit:E,className:"pb-32",children:[e.jsxs("div",{className:"py-6 px-8 flex items-center gap-4 bg-gray-50/30 dark:bg-gray-900/10 border-b border-gray-100 dark:border-white/5",children:[e.jsx(be,{image:w,onImageChange:i,onRemove:m,uploadId:"tenant-avatar-upload",size:"xs",variant:"square",className:"!gap-0"}),e.jsxs("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[e.jsx("h2",{className:"font-black text-gray-900 dark:text-white text-base truncate",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-400 font-bold uppercase tracking-wider truncate",children:[e.jsx(V,{className:"w-3 h-3 opacity-50"}),r.email]}),r.email_verified_at?e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10 px-1.5 py-0.5 rounded-full border border-emerald-100 dark:border-emerald-500/20",children:[e.jsx(R,{className:"w-2 h-2"}),e.jsx("span",{children:"مؤكد"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-black text-amber-500 bg-amber-50 dark:bg-amber-500/10 px-1.5 py-0.5 rounded-full border border-amber-100 dark:border-amber-500/20",children:[e.jsx(F,{className:"w-2 h-2"}),e.jsx("span",{children:"غير مؤكد"})]})]})]})]}),e.jsxs("div",{className:"space-y-0.5 mt-4",children:[e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-black text-xs uppercase tracking-widest",children:[e.jsx(Y,{className:"w-4 h-4"}),"حالة الحساب والاشتراك"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>p({...t,status:"trial"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-xs flex items-center justify-center gap-2 ${t.status==="trial"?"border-primary bg-primary/5 text-primary shadow-sm shadow-primary/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"فترة تجريبية"]}),e.jsxs("button",{type:"button",onClick:()=>p({...t,status:"active"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-xs flex items-center justify-center gap-2 ${t.status==="active"?"border-emerald-600 bg-emerald-50 text-emerald-600 shadow-sm shadow-emerald-500/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(R,{className:"w-4 h-4"}),"اشتراك مفعّل"]})]})]}),e.jsxs("div",{className:"p-8 pt-0 grid grid-cols-1 gap-6",children:[e.jsx(h,{label:"تاريخ نهاية التجربة",type:"date",value:t.trial_expires_at,onChange:l=>p({...t,trial_expires_at:l.target.value}),icon:B}),e.jsx(h,{label:"تاريخ نهاية الاشتراك",type:"date",value:t.subscription_ends_at,onChange:l=>p({...t,subscription_ends_at:l.target.value}),icon:B})]}),e.jsxs("div",{className:"p-8 pt-0 flex flex-col gap-6",children:[e.jsx(h,{label:"واتساب التواصل",type:"tel",value:t.whatsapp,onChange:l=>p({...t,whatsapp:l.target.value}),icon:Ne,className:"ltr"}),e.jsx(fe,{label:"الدولة والمنطقة",value:t.country_code,onChange:l=>p({...t,country_code:l.target.value}),options:D,icon:_e})]}),e.jsxs("div",{className:"mx-8 p-6 rounded-3xl bg-blue-50/30 dark:bg-blue-900/10 flex items-center justify-between border border-blue-100/50 dark:border-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${t.ads_enabled?"bg-blue-100 text-blue-600":"bg-gray-100 dark:bg-dark-700 text-gray-400 opacity-50"}`,children:e.jsx(je,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[13px] font-bold text-gray-900 dark:text-gray-100",children:"الإعلانات الممولة"}),e.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:t.ads_enabled?"مفعلة للمشترك":"معطلة للمشترك"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.ads_enabled,onChange:l=>p({...t,ads_enabled:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 shadow-inner transition-all"})]})]}),e.jsx("div",{className:"p-8",children:e.jsx(h,{label:"تغيير كلمة المرور",type:"password",placeholder:"اتركه فارغاً للتجاهل",value:t.password,onChange:l=>p({...t,password:l.target.value}),icon:Re})})]})]})}),e.jsx("div",{className:"p-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-t border-gray-100 dark:border-gray-700/50 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] shrink-0 z-30",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{type:"submit",form:"tenant-details-form",disabled:j,className:"w-full py-4.5 bg-gray-900 text-white dark:bg-white dark:text-gray-900 rounded-[2rem] font-black hover:opacity-90 disabled:opacity-50 text-sm flex items-center justify-center gap-3 shadow-2xl transition-all active:scale-95 group",children:[j?e.jsx(we,{className:"w-5 h-5 animate-spin"}):e.jsx(Se,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),e.jsx("span",{className:"tracking-wide",children:"حفظ كل التعديلات"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>r&&M(r),title:"سجل الدفعات",className:"aspect-square flex flex-col items-center justify-center bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-2xl hover:bg-emerald-100 transition-all group",children:e.jsx(ye,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:I,title:"دخول كمسؤول (محاكاة)",className:"aspect-square flex flex-col items-center justify-center bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 rounded-2xl hover:bg-blue-100 transition-all group",children:e.jsx(Me,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),r.status!=="disabled"?e.jsx("button",{onClick:()=>L("disable"),title:"تعطيل المشترك",className:"aspect-square flex flex-col items-center justify-center bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400 rounded-2xl hover:bg-gray-200 transition-all group",children:e.jsx(Z,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}):e.jsx("button",{onClick:()=>L("enable"),title:"تفعيل المشترك",className:"aspect-square flex flex-col items-center justify-center bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 rounded-2xl hover:bg-emerald-100 transition-all group",children:e.jsx(R,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("button",{onClick:A,title:"حذف المشترك",className:"aspect-square flex flex-col items-center justify-center bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 rounded-2xl hover:bg-red-100 transition-all group",children:e.jsx(le,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-300 text-center p-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-50 dark:bg-gray-900/50 mb-8 flex items-center justify-center border-4 border-white dark:border-gray-800 shadow-xl",children:e.jsx(Ce,{className:"w-10 h-10 opacity-20"})}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-gray-100 mb-2",children:"إدارة المشتركين"}),e.jsx("p",{className:"text-sm text-gray-400 max-w-[240px] leading-relaxed font-bold",children:"اختر أحد المشتركين من القائمة لعرض تفاصيل حسابه وإدارة اشتراكاته."})]})})}function ma(){const{showSuccess:r,showError:$}=J(),{registerAddAction:f,unregisterAddAction:u}=ie(),[M,S]=n.useState([]),[y,k]=n.useState(!0),[t,p]=n.useState(null),[C,_]=n.useState(1),[j,U]=n.useState(""),[w,T]=n.useState({column:"created_at",order:"desc"}),[P,g]=n.useState(!1),[E,I]=n.useState(!1),[L,A]=n.useState(null),[i,m]=n.useState({name:"",admin_email:"",admin_password:"",status:"trial",trial_expires_at:"",subscription_ends_at:"",ads_enabled:!0});n.useEffect(()=>(f(()=>{m({name:"",admin_email:"",admin_password:"",status:"trial",trial_expires_at:"",subscription_ends_at:"",ads_enabled:!0}),g(!0)},d.TENANTS.ADD_TENANT,W),()=>u()),[f,u]),n.useEffect(()=>{D()},[C,j,w]);const D=async()=>{try{k(!0);const a=new URLSearchParams({page:String(C),per_page:"15",...j&&{search:j},sort_by:w.column,sort_order:w.order}),o=await v.get(`/admin/tenants?${a.toString()}`);S(o.data||[]),p(o.meta||null)}catch(a){oe.error("Error loading tenants:",a),$(d.MESSAGES.ERROR)}finally{k(!1)}},l=async a=>{var o,b;a.preventDefault(),I(!0);try{await v.post("/admin/tenants",i),r(d.MESSAGES.SUCCESS),g(!1),D()}catch(G){$(((b=(o=G.response)==null?void 0:o.data)==null?void 0:b.message)||d.MESSAGES.ERROR)}finally{I(!1)}},x=a=>{_(a)},c=(a,o)=>{T({column:a,order:o}),_(1)},s=a=>{if(!a)return"-";try{const o=new Intl.DisplayNames(["ar"],{type:"region"}).of(a);return o?o.split(" ")[0]:a}catch{return a}},O=a=>{const o=!a.subscription_ends_at&&a.trial_expires_at,b=a.subscription_ends_at||a.trial_expires_at;if(!b)return;const G=new Date(b),te=new Date,se=G.getTime()-te.getTime(),q=Math.ceil(se/(1e3*60*60*24));if(q<0)return o?"تجربة منتهية":"اشتراك منتهٍ";const Q=N=>N===0?"اليوم":N===1?"ينتهي غداً":N===2?"بقي يومان":N>=3&&N<=10?`بقي ${N} أيام`:`بقي ${N} يوماً`;return o?`تجربة (${Q(q)})`:`نشط (${Q(q)})`},ae=a=>{window.location.href=`/admin/payments?tenant=${a.id}&highlight=true`},re=n.useMemo(()=>[{header:"المستأجر",accessor:a=>e.jsx(xe,{name:a.name,avatar:a.avatar_url,uid:a.uid}),exportValue:a=>a.name,className:"min-w-[200px]",sortable:!0,sortKey:"name"},{header:"البريد الإلكتروني",accessor:a=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-sm",children:[e.jsx(V,{className:"w-3 h-3 text-gray-400"}),a.email]}),a.email_verified_at?e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-emerald-600 dark:text-emerald-400",children:[e.jsx(R,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"مؤكد"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-amber-500",children:[e.jsx(ne,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"غير مؤكد"})]})]}),exportValue:a=>a.email,width:"15%",sortable:!0,sortKey:"email"},{header:"البلد",accessor:a=>e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s(a.country_code)}),exportValue:a=>s(a.country_code)||"",className:"min-w-[100px]"},{header:"رقم الهاتف / واتساب",accessor:a=>e.jsx("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-sm",dir:"ltr",children:a.whatsapp||"-"}),exportValue:a=>a.whatsapp||"-",width:"15%"},{header:"الحالة",accessor:a=>e.jsx(Ie,{status:a.status,trialExpiresAt:a.trial_expires_at}),exportValue:a=>{var o;return((o=ee[a.status])==null?void 0:o.label)||a.status},className:"min-w-[100px]"},{header:"تاريخ الانضمام",accessor:a=>e.jsx(H,{date:a.created_at}),exportValue:a=>X(a.created_at),width:"15%",sortable:!0,sortKey:"created_at"},{header:"تاريخ انتهاء الاشتراك",accessor:a=>e.jsx(H,{date:a.subscription_ends_at||a.trial_expires_at||"",label:O(a),isUrgent:!a.subscription_ends_at||a.subscription_ends_at&&new Date(a.subscription_ends_at).getTime()<new Date().getTime()+10080*60*1e3}),exportValue:a=>X(a.subscription_ends_at||a.trial_expires_at||""),width:"15%"},{header:d.TENANTS.ACTIONS,accessor:a=>e.jsx(ue,{children:e.jsx(pe,{type:"icon",onClick:()=>A(a),icon:Te,label:"إدارة",variant:"primary",className:"bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/40"})}),width:"10%",hideInExport:!0}],[s,A]);return e.jsxs(me,{title:d.TITLES.TENANTS,leftSidebarContent:e.jsx(Le,{tenant:L,tenants:M,onSelect:A,onUpdate:D,onNavigateToPayments:ae}),leftSidebarNoPadding:!0,leftSidebarNoBorder:!1,children:[e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(ge,{columns:re,data:M,isLoading:y,exportFileName:"قائمة_المشتركين",paginationMeta:t,onPageChange:x,currentSort:w,onSortChange:c})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-xl shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(W,{className:"w-6 h-6 text-primary"}),d.TENANTS.ADD_TENANT]}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-500",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsx("div",{className:"p-8 space-y-8",children:e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsx(h,{label:d.TENANTS.TENANT_NAME,value:i.name,onChange:a=>m({...i,name:a.target.value}),icon:Ee,required:!0,placeholder:"اسم المتجر أو المؤسسة"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest px-1",children:"نوع الحساب والحالة"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>m({...i,status:"trial"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-sm flex items-center justify-center gap-2 ${i.status==="trial"?"border-primary bg-primary/5 text-primary shadow-sm shadow-primary/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(K,{className:"w-5 h-5"}),"فترة تجريبية"]}),e.jsxs("button",{type:"button",onClick:()=>m({...i,status:"active"}),className:`py-4 rounded-2xl border-2 transition-all font-black text-sm flex items-center justify-center gap-2 ${i.status==="active"?"border-emerald-600 bg-emerald-50 text-emerald-600 shadow-sm shadow-emerald-500/5":"border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 text-gray-400"}`,children:[e.jsx(Y,{className:"w-5 h-5"}),"اشتراك نشط"]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx(h,{type:"date",label:`تاريخ ${i.status==="trial"?"انتهاء التجربة":"انتهاء الاشتراك"}`,value:i.status==="trial"?i.trial_expires_at:i.subscription_ends_at,onChange:a=>{i.status==="trial"?m({...i,trial_expires_at:a.target.value}):m({...i,subscription_ends_at:a.target.value})},icon:B,required:!0}),e.jsx("div",{className:"flex gap-2 mt-4",children:[{label:"شهر",months:1,color:"blue"},{label:"سنة",months:12,color:"purple"},{label:"مداهمة",months:1200,color:"green",special:"مدى الحياة"}].map(a=>e.jsx("button",{type:"button",onClick:()=>{const o=new Date;o.setMonth(o.getMonth()+a.months);const b=o.toISOString().split("T")[0];i.status==="trial"?m({...i,trial_expires_at:b}):m({...i,subscription_ends_at:b})},className:`px-4 py-2 text-[10px] font-black uppercase tracking-tighter rounded-xl bg-${a.color}-50 text-${a.color}-600 dark:bg-${a.color}-900/20 dark:text-${a.color}-400 hover:scale-105 transition-all border border-${a.color}-100 dark:border-${a.color}-900/30`,children:a.special||`+ ${a.label}`},a.label))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100 dark:border-white/5 mt-6",children:[e.jsx(h,{label:d.TENANTS.ADMIN_EMAIL,type:"email",value:i.admin_email,onChange:a=>m({...i,admin_email:a.target.value}),icon:V,required:!0,placeholder:"email@example.com"}),e.jsx(h,{label:d.TENANTS.ADMIN_PASSWORD,type:"password",value:i.admin_password,onChange:a=>m({...i,admin_password:a.target.value}),icon:ke,required:!0,placeholder:"••••••••"})]}),e.jsxs("div",{className:"flex gap-4 pt-10",children:[e.jsxs("button",{type:"submit",disabled:E,className:"flex-1 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-[2rem] py-5 font-black hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-3 shadow-2xl active:scale-95 group",children:[E?e.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(ve,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),E?d.BUTTONS.SAVING:d.TENANTS.CREATE_TENANT]}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-8 bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 rounded-2xl py-5 font-black hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:d.BUTTONS.CANCEL})]})]})})})]})})]})}export{ma as default};
