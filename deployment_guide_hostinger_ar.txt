# دليل رفع مشروع NaySaaS على استضافة Hostinger (Laravel + React)

هذا الدليل يشرح خطوات رفع المشروع بالكامل إلى استضافة Hostinger، مع مراعاة أن النظام يتكون من واجهة أمامية (React/Vite) وخلفية (Laravel).

---

## أولاً: تجهيز الباك اند (Laravel Backend)

1. **ضغط الملفات**:
   - توجه إلى مجلد `backend`.
   - قم بحذف مجلد `vendor` ومجلد `node_modules` (سيتم تحميلهم لاحقاً أو يفضل الرفع بوجود vendor إذا لم يكن لديك SSH).
   - قم بضغط محتويات مجلد `backend` في ملف ZIP.

2. **الرفع إلى Hostinger**:
   - داخل لوحة تحكم Hostinger (hPanel)، اذهب إلى "File Manager".
   - يفضل إنشاء مجلد خاص للباك اند خارج مجلد `public_html` (مثلاً تسميه `api_core`) لزيادة الأمان.
   - ارفع ملف الـ ZIP وفكه هناك.

3. **إعدادات قاعدة البيانات**:
   - من لوحة التحكم، اذهب إلى `Databases` -> `MySQL Databases`.
   - أنشئ قاعدة بيانات جديدة واسم مستخدم وكلمة مرور.
   - اذهب إلى ملف `.env` في الباك اند وقم بتحديث البيانات:
     ```env
     DB_DATABASE=اسم_قاعدة_البيانات
     DB_USERNAME=اسم_المستخدم
     DB_PASSWORD=كلمة_المرور
     APP_URL=https://api.yourdomain.com (أو الدومين المستخدم للباك اند)
     ```

4. **ربط المجلد العام (Public Folder)**:
   - بما أن استضافة Hostinger تستخدم مجلد `public_html` كمجلد رئيسي، لديك خياران:
     - **الخيار الأول (نوصي به)**: إنشاء Subdomain للباك اند (مثلاً `api.yourdomain.com`) وتوجيهه لمجلد `backend/public`.
     - **الخيار الثاني**: تحريك محتويات مجلد `backend/public` إلى مجلد `public_html` وتعديل مسارات ملف `index.php`.

5. **أوامر Artisan**:
   - إذا كان لديك وصول SSH، اركض الأوامر التالية:
     ```bash
     php artisan migrate --seed
     php artisan storage:link
     php artisan config:cache
     ```
   - إذا لم يكن لديك SSH، يمكنك تنفيذ المايجريشن عبر إنشاء "Route" مؤقت في Laravel.

---

## ثانياً: تجهيز الفرنت اند (React Frontend)

1. **تعديل الإعدادات قبل البناء**:
   - اذهب إلى مجلد `frontend`.
   - افتح ملف `.env.production` (أو تأكد من الإعدادات في `src/core/config.ts`).
   - تأكد أن `VITE_API_URL` يشير إلى رابط الباك اند الذي رفعته في الخطوة السابقة.

2. **بناء المشروع (Production Build)**:
   - افتح Terminal في مجلد `frontend` ونفذ الأمر التالي:
     ```bash
     npm run build
     ```
   - سيتم إنشاء مجلد جديد باسم `dist`.

3. **الرفع للموقع الرئيسي**:
   - ارفع محتويات مجلد `dist` (وليس المجلد نفسه) مباشرة إلى مجلد `public_html` الخاص بالموقع الرئيسي.

4. **ملف .htaccess للتوجيه**:
   - لضمان عمل "React Router" بشكل صحيح عند تحديث الصفحة، أنشئ ملفاً باسم `.htaccess` داخل مجلد `public_html` (إذا لم يكن موجوداً) وضف به الكود التالي:
     ```apache
     <IfModule mod_rewrite.c>
       RewriteEngine On
       RewriteBase /
       RewriteRule ^index\.html$ - [L]
       RewriteCond %{REQUEST_FILENAME} !-f
       RewriteCond %{REQUEST_FILENAME} !-d
       RewriteRule . /index.html [L]
     </IfModule>
     ```

---

## ملاحظات هامة:

- **نسخة PHP**: تأكد من أن نسخة PHP في Hostinger هي 8.2 أو أعلى (من قسم PHP Configuration).
- **إضافة Extensions**: تأكد من تفعيل الإضافات الضرورية مثل `intl`, `bcmath`, `mbstring`.
- **SSL**: تأكد من تفعيل شهادة SSL (HTTPS) لضمان عمل اتصالات الـ API بشكل آمن.
- **التصاريح**: تأكد من أن مجلد `storage` و `bootstrap/cache` في الباك اند لديهم تصاريح كتابة (775).

---
تم إعداد هذا الدليل بواسطة Antigravity.
